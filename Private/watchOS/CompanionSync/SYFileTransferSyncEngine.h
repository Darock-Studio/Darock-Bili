//
//   Generated by https://github.com/blacktop/ipsw (Version: 3.1.454, BuildTime: 2024-02-08T22:07:34Z)
//
//    - LC_BUILD_VERSION:  Platform: watchOSSimulator, MinOS: 10.2, SDK: 10.2, Tool: ld (902.8)
//    - LC_SOURCE_VERSION: 267.0.0.0.0
//
#ifndef SYFileTransferSyncEngine_h
#define SYFileTransferSyncEngine_h
@import Foundation;

#include "SYSyncEngine.h"
#include "IDSServiceDelegate-Protocol.h"
#include "SYDevice.h"
#include "SYStartSyncSession.h"
#include "_SYInputStreamer.h"
#include "_SYOutputStreamer.h"

@class IDSMessageContext, IDSService, NSDictionary, NSMutableArray, NSMutableDictionary, NSMutableIndexSet, NSMutableSet, NSString, NSURL;
@protocol OS_dispatch_queue, OS_os_transaction;

@interface SYFileTransferSyncEngine : SYSyncEngine<IDSServiceDelegate> {
  /* instance variables */
  BOOL _inSession;
  BOOL _sessionCanceled;
  SYStartSyncSession *_sessionStartMessage;
  NSURL *_outputFileURL;
  _SYOutputStreamer *_outputStream;
  NSURL *_inputFileURL;
  _SYInputStreamer *_inputStream;
  IDSMessageContext *_inputPriorityBoostContext;
  NSURL *_responseFileURL;
  _SYOutputStreamer *_responseStream;
  BOOL _responsesCanceled;
  IDSService *_idsService;
  SYDevice *_activeDevice;
  SYDevice *_sessionDevice;
  SYDevice *_responseDevice;
  struct os_unfair_lock_s { unsigned int _os_unfair_lock_opaque; } _idsQueueLock;
  NSObject<OS_dispatch_queue> *_idsQueue;
  BOOL _idsQueueIsSuspended;
  BOOL _idsQueueResumedLock;
  NSMutableIndexSet *_messageRows;
  NSMutableIndexSet *_responseMessageRows;
  NSMutableArray *_deferredIncomingSessions;
  NSMutableSet *_singleMessageUUIDs;
  struct os_unfair_lock_s { unsigned int _os_unfair_lock_opaque; } _messageMapLock;
  NSMutableDictionary *_messageIDsToSessionIDs;
  NSObject<OS_os_transaction> *_closureTransaction;
  NSObject<OS_os_transaction> *_responseSessionTransaction;
}

@property (copy, nonatomic) NSDictionary *customIDSOptions;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;

/* instance methods */
- (id)initWithService:(id)service queue:(id)queue;
- (void)_suspendIdsQueue;
- (void)_resumeIdsQueue;
- (void)dealloc;
- (BOOL)resume:(id *)resume;
- (void)suspend;
- (void)endFileTransferForStream:(id)stream atURL:(id)url target:(id)target wasCancelled:(BOOL)cancelled messageRows:(id)rows;
- (void)beginResponseSession;
- (void)endResponseSession;
- (void)beginSession;
- (void)endSession;
- (BOOL)isInSession;
- (BOOL)buffersSessions;
- (BOOL)buffersHandshake;
- (BOOL)targetIsNearby;
- (BOOL)_sessionDeviceCanUseSingleMessages;
- (void)_enqueueSingleMessage:(id)message withMessageID:(unsigned short)id priority:(long long)priority options:(id)options userContext:(id)context callback:(id /* block */)callback;
- (void)enqueueSyncRequest:(id)request withMessageID:(unsigned short)id priority:(long long)priority options:(id)options userContext:(id)context callback:(id /* block */)callback;
- (id)outputStreamWithMetadata:(id)metadata priority:(long long)priority options:(id)options context:(id)context error:(id *)error;
- (id)cancelMessagesReturningFailures:(id)failures;
- (id)stateForLogging;
- (void)_cancelSession;
- (void)_cancelResponses;
- (void)_handleSessionRestart:(id)restart priority:(long long)priority options:(id)options userContext:(id)context callback:(id /* block */)callback;
- (void)_reallyHandleSessionRestart:(id)restart priority:(long long)priority options:(id)options userContext:(id)context callback:(id /* block */)callback;
- (id)idsOptions:(id)options;
- (id)idsOptions:(id)options forFileTransfer:(BOOL)transfer;
- (id)_fileTransferHeader;
- (id)_wrapMessage:(id)message ofType:(unsigned short)type userInfo:(id)info;
- (id)_wrapResponse:(id)response toRequest:(id)request ofType:(unsigned short)type;
- (id)_wrapIncomingMessage:(id)message ofType:(unsigned short)type identifier:(id)identifier;
- (id)_wrapIncomingResponse:(id)response ofType:(unsigned short)type identifier:(id)identifier;
- (id)_assumeOwnershipOfURL:(id)url error:(id *)error;
- (void)_readNextProtobuf:(id /* block */)protobuf;
- (void)_recordLastSeqNo:(id)no;
- (BOOL)_shouldTreatAsSessionEnd:(id)end;
- (void)_consumeRemainingStreamDataWithIdentifier:(id)identifier completion:(id /* block */)completion;
- (void)_handleProtobuf:(id)protobuf ofType:(unsigned short)type identifier:(id)identifier isResponse:(BOOL)response withCompletion:(id /* block */)completion;
- (void)_handleIncomingStreamDataWithIdentifier:(id)identifier completion:(id /* block */)completion;
- (void)_handleIncomingSessionFileAtOwnedURL:(id)url metadata:(id)metadata identifier:(id)identifier idsContext:(id)context;
- (void)_handleIncomingSessionFileAtURL:(id)url metadata:(id)metadata identifier:(id)identifier idsContext:(id)context;
- (void)_processNMSMessageData:(id)data context:(id)context;
- (void)service:(id)service account:(id)account incomingResourceAtURL:(id)url metadata:(id)metadata fromID:(id)id context:(id)context;
- (void)service:(id)service account:(id)account incomingData:(id)data fromID:(id)id context:(id)context;
- (void)service:(id)service account:(id)account identifier:(id)identifier didSendWithSuccess:(BOOL)success error:(id)error context:(id)context;
- (void)_handleError:(id)error messageID:(id)id streamer:(id)streamer;
- (void)service:(id)service account:(id)account identifier:(id)identifier hasBeenDeliveredWithContext:(id)context;
- (void)service:(id)service didSwitchActivePairedDevice:(id)device acknowledgementBlock:(id /* block */)block;
- (void)service:(id)service nearbyDevicesChanged:(id)changed;
- (void)service:(id)service connectedDevicesChanged:(id)changed;
- (unsigned long long)_crcChecksum:(id)checksum;
@end

#endif /* SYFileTransferSyncEngine_h */
