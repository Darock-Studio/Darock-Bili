//
//   Generated by https://github.com/blacktop/ipsw (Version: 3.1.454, BuildTime: 2024-02-08T22:07:34Z)
//
//    - LC_BUILD_VERSION:  Platform: watchOSSimulator, MinOS: 10.2, SDK: 10.2, Tool: ld (902.8)
//    - LC_SOURCE_VERSION: 624.0.100.0.0
//
#ifndef PLPhotosHighlightGenerator_h
#define PLPhotosHighlightGenerator_h
@import Foundation;

#include "PLDateRangeTitleGenerator.h"
#include "PLFrequentLocationManager.h"
#include "PLHighlightHierarchy.h"
#include "PLLocalCreationDateCreator.h"
#include "PLPhotosHighlightClusterGenerator.h"

@class NSDateInterval, NSMutableSet;
@protocol PLMomentGenerationDataManagement><PLHighlightItemModelReader;

@interface PLPhotosHighlightGenerator : NSObject

@property (retain, nonatomic) PLHighlightHierarchy *entitiesToUpdate;
@property (retain, nonatomic) NSMutableSet *highlightsWithDeletedAssets;
@property (retain, nonatomic) NSMutableSet *upsertedHighlights;
@property (retain, nonatomic) NSMutableSet *highlightsToDelete;
@property (nonatomic) BOOL didCallBeginGeneration;
@property (weak, nonatomic) NSObject<PLMomentGenerationDataManagement><PLHighlightItemModelReader> *dataManager;
@property (readonly, nonatomic) NSDateInterval *recentHighlightsDateInterval;
@property (readonly, nonatomic) PLPhotosHighlightClusterGenerator *highlightClusterGenerator;
@property (retain, nonatomic) NSMutableSet *highlightsNeedingNewKeyAsset;
@property (readonly, nonatomic) PLFrequentLocationManager *frequentLocationManager;
@property (readonly, nonatomic) PLLocalCreationDateCreator *localCreationDateCreator;
@property (readonly, nonatomic) PLDateRangeTitleGenerator *dateRangeTitleGenerator;

/* class methods */
+ (void)updateTitleForHighlights:(id)highlights forKind:(unsigned short)kind forceUpdateLocale:(BOOL)locale dateRangeTitleGenerator:(id)generator;
+ (BOOL)assetEligibleForRecents:(id)recents;
+ (BOOL)_shouldUpdateKeyAssetForParentHighlight:(id)highlight withPrivateKeyAssetObjectID:(id)id andSharedKeyAssetObjectID:(id)id;
+ (void)_updateMixedSharingCompositionKeyAssetRelationshipForHighlight:(id)highlight;
+ (void)_updateParentHighlightNeedingNewKeyAsset:(id)asset withProvisionalKeyAssetPrivate:(id)private andProvisionalKeyAssetShared:(id)shared updatedHighlights:(id)highlights;
+ (void)updateKeyAssetForHighlights:(id)highlights;
+ (id)provisionalKeyAssetForHighlight:(id)highlight sharingConsideration:(long long)consideration;
+ (id)_provisionalKeyAssetForDayHighlight:(id)highlight sharingConsideration:(long long)consideration;
+ (id)_provisionalKeyAssetForDayGroupHighlight:(id)highlight sharingConsideration:(long long)consideration;
+ (id)_provisionalKeyAssetForMonthAndYearHighlight:(id)highlight sharingConsideration:(long long)consideration;
+ (double)curationScoreForAsset:(id)asset;
+ (BOOL)assetEligibleForCuration:(id)curation;
+ (id)_bestAssetInAssets:(id)assets fallback:(BOOL)fallback;
+ (id)lastHighlightTitlesUpdateDay;
+ (void)setLastHighlightTitlesUpdateDay:(id)day;
+ (id)lastRecentHighlightUpdateDate;
+ (void)setLastRecentHighlightUpdateDate:(id)date;
+ (id)userDefaults;

/* instance methods */
- (id)updateElectedEventForUpdatedMonths:(id)months;
- (void)generateHighlightListForUpdatedHighlights:(id)highlights deletedHighlights:(id)highlights;
- (void)_consumeHighlightItemListChanges:(id)changes forKind:(unsigned short)kind rule:(id)rule resultBlock:(id /* block */)block;
- (id)fetchAllRecentHighlights;
- (id)fetchAllOngoingTripDayGroupHighlights;
- (void)updateRecentHighlightCurationForHighlight:(id)highlight;
- (void)resetPreviousRecentHighlightCurationForHighlight:(id)highlight;
- (void)updateCurationForHighlight:(id)highlight withAssetsBelongingToCuration:(id)curation;
- (void)resetDayGroupCurationForAsset:(id)asset;
- (BOOL)shouldForceVisibilityStateUpdateForHighlight:(id)highlight highlightCluster:(id)cluster;
- (BOOL)setVisibilityStateForHighlight:(id)highlight shouldForceUpdate:(BOOL)update;
- (BOOL)_setVisibilityStateForHighlight:(id)highlight shouldForceUpdate:(BOOL)update sharingConsideration:(long long)consideration;
- (BOOL)_highlightShouldNotBeVisible:(id)visible sharingConsideration:(long long)consideration;
- (BOOL)_highlightTypeSupportsVisibilityStateDayOnly:(unsigned short)only;
- (void)markHighlightNeedingNewKeyAssetsWithAsset:(id)asset;
- (void)_updateDayHighlight:(id)highlight withNewAssets:(id)assets;
- (void)_updateDayGroupHighlight:(id)highlight withNewAssets:(id)assets;
- (id)initWithDataManager:(id)manager frequentLocationManager:(id)manager localCreationDateCreator:(id)creator dateRangeTitleGenerator:(id)generator;
- (void)_resetProperties;
- (void)beginGenerationWithAssets:(id)assets hiddenAssets:(id)assets;
- (void)registerHighlightsWithDeletedMoments:(id)moments;
- (void)generateHighlightsForUpsertedMoments:(id)moments frequentLocationsDidChange:(BOOL)change;
- (id)_highlightToReuseForMoments:(id)moments;
- (void)updateTitlesForHighlight:(id)highlight options:(unsigned long long)options;
- (void)_insertDayPhotosHighlightCluster:(id)cluster;
- (id)_insertDayGroupPhotosHighlightCluster:(id)cluster;
- (BOOL)_updateHighlightProperties:(id)properties fromHighlightCluster:(id)cluster;
- (void)finishGeneration;
- (void)processRecentHighlights;
- (void)processUnprocessedMomentLocations;
- (void)updateHighlightTitles;
- (void)cleanupEmptyHighlights;
- (id)_recentHighlightsDateIntervalWithDate:(id)date;
- (id)_fetchAllMoments;
- (id)_fetchMomentsRequiringLocationProcessingWhenCoreRoutineIsAvailable;
- (id)_fetchMomentsRequiringLocationProcessingWhenFrequentLocationsAreAvailable;
- (id)_fetchMomentsRequiringLocationProcessingWhenFrequentLocationsChanged;
- (id)_highlightMomentClustersForMoments:(id)moments excludingMomentIds:(id)ids;
- (id)_collectMomentsRequiringReprocessingFromMoments:(id)moments withAllMoments:(id)moments;
@end

#endif /* PLPhotosHighlightGenerator_h */
