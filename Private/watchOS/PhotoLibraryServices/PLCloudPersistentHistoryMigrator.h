//
//   Generated by https://github.com/blacktop/ipsw (Version: 3.1.454, BuildTime: 2024-02-08T22:07:34Z)
//
//    - LC_BUILD_VERSION:  Platform: watchOSSimulator, MinOS: 10.2, SDK: 10.2, Tool: ld (902.8)
//    - LC_SOURCE_VERSION: 624.0.100.0.0
//
#ifndef PLCloudPersistentHistoryMigrator_h
#define PLCloudPersistentHistoryMigrator_h
@import Foundation;

#include "PLCloudBatchUploader.h"
#include "PLCloudPersistentHistoryMigratorContext-Protocol.h"
#include "PLCloudPhotoLibraryUploadTracker.h"
#include "PLManagedObjectContext.h"

@interface PLCloudPersistentHistoryMigrator : NSObject {
  /* instance variables */
  PLCloudBatchUploader *_uploader;
  PLCloudPhotoLibraryUploadTracker *_uploadTracker;
  PLManagedObjectContext *_managedObjectContext;
  NSObject<PLCloudPersistentHistoryMigratorContext> *_migratorContext;
}

/* class methods */
+ (void)migrateToPersistentHistoryIfNecessaryWithUploader:(id)uploader uploadTracker:(id)tracker managedObjectContext:(id)context migratorContext:(id)context;

/* instance methods */
- (id)initWithUploader:(id)uploader uploadTracker:(id)tracker managedObjectContext:(id)context migratorContext:(id)context;
- (void)migrateToPersistentHistoryIfNecessary;
- (long long)migrate;
- (BOOL)checkForExistingMigrationMarker;
- (BOOL)readLastKnownChangeHubIndex:(unsigned long long *)index;
- (id)fetchChangeHubEventsSinceLastKnownIndex:(unsigned long long)index;
- (id)fetchAllPersistentHistoryTransactions;
- (void)uploadEventResults:(id)results;
- (void)updateSavedTokenFromPersistentHistoryResult:(id)result;
@end

#endif /* PLCloudPersistentHistoryMigrator_h */
