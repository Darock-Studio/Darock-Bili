//
//   Generated by https://github.com/blacktop/ipsw (Version: 3.1.454, BuildTime: 2024-02-08T22:07:34Z)
//
//    - LC_BUILD_VERSION:  Platform: watchOSSimulator, MinOS: 10.2, SDK: 10.2, Tool: ld (902.8)
//    - LC_SOURCE_VERSION: 624.0.100.0.0
//
#ifndef PLDuplicateProcessor_h
#define PLDuplicateProcessor_h
@import Foundation;

#include "PLLibraryServicesManager.h"
#include "PLPhotoLibrary.h"

@class NSMutableSet, PLLazyObject;

@interface PLDuplicateProcessor : NSObject {
  /* instance variables */
  PLLibraryServicesManager *_lsm;
  struct os_unfair_lock_s { unsigned int _os_unfair_lock_opaque; } _processingLock;
  NSMutableSet *_inFlightMergeAssetUuids;
  struct os_unfair_lock_s { unsigned int _os_unfair_lock_opaque; } _inFlightMergeLock;
  PLLazyObject *_lazyAppPrivateData;
  BOOL _enableEXIFDataAccess;
}

@property (retain) PLPhotoLibrary *unitTestLibrary;
@property (readonly) BOOL isMerging;

/* class methods */
+ (BOOL)isValidDuplicateProcessorForLibraryServicesManager:(id)manager;
+ (BOOL)isExitingSharedLibraryForLibrary:(id)library;
+ (void)signalBackgroundJobSeviceDuplicateProcessingWithLibrary:(id)library;
+ (BOOL)removeAllDuplicateSharedLibraryAssetFromAlbumWithPhotoLibrary:(id)library error:(id *)error;
+ (BOOL)_removeAssetsFromDuplicateAlbumUsingFetchRequest:(id)request library:(id)library error:(id *)error;
+ (BOOL)sharedLibraryDedupeEnabledWithPathManager:(id)manager;
+ (void)updateSharedLibraryIsEnabledFeatureVersionIfNeededWithPhotoLibrary:(id)library cplConfiguration:(id)configuration;

/* instance methods */
- (id)initWithLibraryServicesManager:(id)manager;
- (id)_photoLibrary;
- (id)_appPrivateData;
- (BOOL)_isValidSharedLibraryStateWithLibrary:(id)library error:(id *)error;
- (BOOL)processDuplicatesOfAssetObjectIds:(id)ids processingType:(unsigned long long)type error:(id *)error continuationHandler:(id /* block */)handler;
- (BOOL)_batchEnumerateOrGenerateAssetObjectIdsFromStartingAssetOIDs:(id)oids library:(id)library error:(id *)error continuationHandler:(id /* block */)handler processingBatchBlock:(id /* block */)block;
- (void)_setInterruptMarker:(id)marker;
- (id)_resumeInterruptMarker;
- (id)_buildInterruptBatchFromStartingOIDs:(id)oids library:(id)library;
- (BOOL)_processDuplicatesWithPhotoLibrary:(id)library processingType:(unsigned long long)type assetObjectIds:(id)ids error:(id *)error;
- (BOOL)_detectDuplicatesAndInsertIntoDuplicateAlbumWithPhotoLibrary:(id)library detector:(id)detector duplicateType:(short)type error:(id *)error;
- (BOOL)_processedDuplicateAssetSubGroupWithPhotoLibrary:(id)library assetObjectIDs:(id)ids duplicateType:(short)type error:(id *)error;
- (id)_processedDuplicateAssetsWithPhotoLibrary:(id)library assetObjectIDs:(id)ids duplicateType:(short)type associatedDuplicateAlbum:(id *)album error:(id *)error;
- (BOOL)_processedRemoveExclusionGroupAssetsWithPhotoLibrary:(id)library assetObjectIDs:(id)ids error:(id *)error;
- (id)_fetchAssetsWithPhotoLibrary:(id)library assetObjectIDs:(id)ids error:(id *)error;
- (id)_fetchAssetOIDsForPhotoLibrary:(id)library error:(id *)error;
- (BOOL)_moveDuplicateAlbumAssestFromAlbums:(id)albums toTargetAlbum:(id)album duplicateType:(short)type error:(id *)error;
- (BOOL)_insertIntoDuplicateAlbum:(id)album assets:(id)assets duplicateType:(short)type photoLibrary:(id)library error:(id *)error;
- (id)_duplicateAlbumsFromAssets:(id)assets;
- (BOOL)assetsArePendingForDuplicateMergeProcessing:(id)processing;
- (void)mergeDuplicateAssetsWithAssetUUIDs:(id)uuids completionHandler:(id /* block */)handler;
- (BOOL)_processMergeAlbumAssetOIDMap:(id)oidmap localIdentifierMap:(id)map library:(id)library error:(id *)error;
- (BOOL)_processMergeAssets:(id)assets localIdentifierMap:(id)map library:(id)library error:(id *)error;
- (BOOL)_processMergeGroupContainer:(id)container processedAssetCount:(unsigned long long *)count skippedAssetCount:(unsigned long long *)count library:(id)library error:(id *)error;
- (BOOL)_processMergeGroup:(id)group processedAssetCount:(unsigned long long *)count skippedAssetCount:(unsigned long long *)count processedAssetCountAfterSave:(unsigned long long *)save library:(id)library error:(id *)error;
- (id)_processAlbumGroupingFromAssets:(id)assets localIdentifierToCloudIdentifiers:(id)identifiers library:(id)library;
- (id)_processContainersAssetUUIDS:(id)uuids library:(id)library;
- (void)_processCloudScopedIdentifiersFromAssetUUIDS:(id)uuids library:(id)library completionHandler:(id /* block */)handler;
- (void)_processCloudScopedIdentifierFromLocalIdentifiers:(id)identifiers localToCloudIdentifierMap:(id)map cplManager:(id)manager completionHandler:(id /* block */)handler;
- (id)_fetchAssetsFromUUIDs:(id)uuids library:(id)library error:(id *)error;
- (id)_fetchAssetsFromOIDs:(id)oids library:(id)library error:(id *)error;
- (id)_fetchAssetsFromReference:(id)reference isOID:(BOOL)oid library:(id)library error:(id *)error;
- (id)_fetchCloudIdentifiersFromAssetUUIDs:(id)uuids library:(id)library error:(id *)error;
- (BOOL)_isAssetValidForMerge:(id)merge;
- (BOOL)_isMergeFeatureEnabled:(id *)enabled;
- (void)_inFlightMergeAssetsAddUUIDs:(id)uuids;
- (void)_inFlightMergeAssetsRemoveUUIDs:(id)uuids;
@end

#endif /* PLDuplicateProcessor_h */
