//
//   Generated by https://github.com/blacktop/ipsw (Version: 3.1.454, BuildTime: 2024-02-08T22:07:34Z)
//
//    - LC_BUILD_VERSION:  Platform: watchOSSimulator, MinOS: 10.2, SDK: 10.2, Tool: ld (902.8)
//    - LC_SOURCE_VERSION: 30.0.0.0.0
//
#ifndef FKFriendsManager_h
#define FKFriendsManager_h
@import Foundation;

#include "FKDelayedOperation.h"
#include "FKFriendGroupDelegate-Protocol.h"

@class NPSManager, NSArray, NSHashTable, NSMapTable, NSMutableArray, NSMutableDictionary, NSMutableSet, NSString, NSTimer;
@protocol OS_dispatch_queue;

@interface FKFriendsManager : NSObject<FKFriendGroupDelegate> {
  /* instance variables */
  NSString *_domain;
  unsigned long long _maxFriendGroups;
  unsigned long long _maxFriendsPerGroup;
  BOOL _shouldAddEmptyTrailingGroup;
  struct __CFString * _friendsChangedExternallyNotificationName;
  struct __CFString * _friendGroupTitleChangedExternallyNotificationName;
  BOOL _shouldDeduplicateFriendList;
  BOOL _shouldRemoveDestinationlessFriends;
  NSMutableArray *_friendList;
  NSMutableArray *_friendGroups;
  NPSManager *_npsManager;
  NSTimer *_addressBookRefreshTimer;
  NSObject<OS_dispatch_queue> *_saveQueue;
  NSObject<OS_dispatch_queue> *_changeLogQueue;
  unsigned long long _postCount;
  NSHashTable *_sourcedPersons;
  NSMapTable *_identifiersToPersonMap;
  BOOL _needsFriendListSync;
  BOOL _needsAddressBookRefresh;
  BOOL _didCompleteInitialLoading;
  NSMutableSet *_highPriorityDestinations;
  NSArray *_pendingDestinations;
  NSMutableDictionary *_cachedStatuses;
  NSTimer *_idsQueryTimeoutTimer;
}

@property (retain, nonatomic) FKDelayedOperation *saveOperation;
@property (retain, nonatomic) NSMutableDictionary *changeLog;
@property (nonatomic) BOOL refreshAgainstContactsEnabled;
@property (nonatomic) BOOL lastLoadHadChanges;
@property (retain, nonatomic) NSString *serviceName;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;

/* class methods */
+ (id)managerForDomain:(id)domain;
+ (void)setMaxGroupCount:(unsigned long long)count domain:(id)domain;
+ (void)setGroupSize:(unsigned long long)size domain:(id)domain;
+ (void)setEnableEmptyTrailingGroup:(BOOL)group domain:(id)domain;
+ (void)setFriendsChangedExternallyNotificationName:(id)name domain:(id)domain;
+ (void)setFriendGroupTitleChangedExternallyNotificationName:(id)name domain:(id)domain;
+ (void)setRefreshAgainstContactsOnInitEnabled:(BOOL)enabled domain:(id)domain;
+ (id)collapseChangeLogsIntoChangeLog:(id)log;

/* instance methods */
- (id)initWithDomain:(id)domain;
- (void)dealloc;
- (id)friendGroups;
- (void)_addEmptyGroup;
- (void)_createEmptyFriendList;
- (void)reloadFriendList;
- (void)_loadFriendList;
- (id)_curatedFriendList;
- (void)_addCuratedFriends:(id)friends;
- (BOOL)_shouldAddEmptyGroup;
- (void)_updateFriendGroups;
- (BOOL)_canAddFriendGroup;
- (BOOL)canAddFriend;
- (unsigned long long)groupIndexContainingFriend:(id)friend;
- (void)_removeGroupAtIndex:(unsigned long long)index;
- (void)syncFriendGroup:(id)group;
- (void)purgeEmptyFriendGroups;
- (void)_aggdSetValue:(long long)value forScalarKey:(struct __CFString *)key;
- (void)_aggdLogFriendCount;
- (void)_aggdLogFriendGroupCount;
- (void)_postGroupListChangedNotification;
- (BOOL)shouldAllowAddingContact:(id)contact withContactStore:(id)store personValueCache:(id)cache;
- (void)friendGroup:(id)group didSetFriend:(id)friend atPosition:(unsigned long long)position;
- (void)friendGroup:(id)group didRemoveFriend:(id)friend atPosition:(unsigned long long)position;
- (void)friendGroup:(id)group didMoveFriends:(id)friends;
- (id)allPeople;
- (BOOL)addFriend:(id)friend;
- (BOOL)isPersonFriend:(id)friend;
- (unsigned long long)positionOfFriendInGroup:(id)group;
- (BOOL)containsFriendWithABRecordGUID:(id)guid;
- (id)personLikePerson:(id)person;
- (id)_friendAtPosition:(unsigned long long)position;
- (void)save;
- (void)_save;
- (void)_incrementExternalChangePostCount;
- (struct __CFString *)_notificationForExternalListChange;
- (id)personWithDestinations:(id)destinations;
- (id)personWithABRecordGUID:(id)guid;
- (void)_storeSourcedPerson:(id)person;
- (void)_addPersonToIdentifiersToPersonMap:(id)map;
- (void)_removePersonFromIdentifiersToPersonMap:(id)map;
- (void)_createAddressToPersonDictionary;
- (id)_destinations;
- (void)refreshDestinationStatuses;
- (long long)_compareStatus:(long long)status toStatus:(long long)status;
- (void)idStatusUpdatedForDestinations:(id)destinations;
- (long long)statusForPerson:(id)person requery:(BOOL)requery;
- (id)reachableDestinationsForPerson:(id)person;
- (void)_queryDestinations:(id)destinations;
- (void)_startIDSQueryTimeoutTimer;
- (void)_stopIDSQueryTimeoutTimer;
- (void)_idsQueryTimeoutTimerFired;
- (BOOL)_shouldBypassDestinationStatusCheck;
- (unsigned long long)_indexForPosition:(unsigned long long)position inGroup:(id)group;
- (long long)_firstEmptyPosition;
- (unsigned long long)_numberOfFriendsInList:(id)list;
- (void)_postChangeNotificationIfNecessary;
- (void)_personValuesChanged:(id)changed;
- (void)_friendsChangedExternally;
- (void)_loadGroupTitles;
- (void)_groupTitleChangedExternally;
- (void)_addressBookChanged:(id)changed;
- (void)_updateFriends:(id)friends;
- (void)_cleanUpFriendListIfNecessary;
- (void)_deduplicateFriendListIfNecessary;
- (void)_removeDestinationlessFriendsIfNecessary;
- (void)_removeFriendsAtIndices:(id)indices;
- (unsigned long long)_changeLogCount;
- (id)_copyAndResetChangeLog;
- (void)_addEntryToChangeLogForPerson:(id)person changeType:(id)type;
- (BOOL)_changeLogContainsFriendAdditionsOrUpdates;
- (int)_lastKnownAddressBookSequenceNumber;
- (void)_updateLastKnownAddressBookSequenceNumber:(int)number;
- (BOOL)_addressBookSequenceNumberDidChange;
- (BOOL)refreshAgainstAddressBook;
- (void)saveFriendGroupTitles;
- (void)markFriendListAsNormalized;
- (BOOL)isRefreshAgainstContactsEnabled;
- (BOOL)didLastLoadHaveChanges;
@end

#endif /* FKFriendsManager_h */
