//
//   Generated by https://github.com/blacktop/ipsw (Version: 3.1.454, BuildTime: 2024-02-08T22:07:34Z)
//
//    - LC_BUILD_VERSION:  Platform: watchOSSimulator, MinOS: 10.2, SDK: 10.2, Tool: ld (902.8)
//    - LC_SOURCE_VERSION: 240.3.4.0.0
//
#ifndef LPMetadataProvider_h
#define LPMetadataProvider_h
@import Foundation;

#include "LPEvent.h"
#include "LPFetcherGroup.h"
#include "LPLinkMetadata.h"
#include "LPMetadataProviderSpecialization.h"
#include "LPMetadataProviderSpecializationDelegate-Protocol.h"
#include "WKNavigationDelegate-Protocol.h"

@class BKSProcessAssertion, NSMutableArray, NSString, NSTimer, NSURL, NSURLRequest, WKWebView;
@protocol OS_dispatch_group;

@interface LPMetadataProvider : NSObject<WKNavigationDelegate, LPMetadataProviderSpecializationDelegate> {
  /* instance variables */
  unsigned int _loggingID;
  WKWebView *_webView;
  NSURLRequest *_URLRequest;
  NSURL *_originalURL;
  NSTimer *_watchdog;
  BKSProcessAssertion *_processAssertion;
  LPEvent *_event;
  LPEvent *_mainResourceLoadEvent;
  LPEvent *_webProcessLaunchEvent;
  LPLinkMetadata *_metadata;
  BOOL _complete;
  BOOL _fetchingFromExistingWebView;
  BOOL _hasStartedFetching;
  BOOL _hasStartedFetchingMetadataFromWebView;
  BOOL _timedOut;
  BOOL _subresourceFetchIsNonAppInitiated;
  NSObject<OS_dispatch_group> *_subresourceFetchGroup;
  LPFetcherGroup *_iconFetcherGroup;
  NSMutableArray *_pendingFetchers;
  long long _specializationState;
  LPMetadataProviderSpecialization *_specializedMetadataProvider;
  BOOL _shouldDownloadMediaSubresources;
  BOOL _shouldDownloadImageSubresources;
}

@property (copy, nonatomic) id /* block */ completionHandler;
@property BOOL cancelled;
@property (readonly, nonatomic) LPEvent *_event;
@property (nonatomic) BOOL useSpecializedProviders;
@property (nonatomic) BOOL fetchSubresources;
@property (nonatomic) BOOL _shouldDownloadImageSubresources;
@property (nonatomic) BOOL _shouldDownloadMediaSubresources;
@property (nonatomic) unsigned long long allowedSpecializedProviders;
@property (nonatomic) BOOL shouldFetchSubresources;
@property (nonatomic) double timeout;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;

/* class methods */
+ (id)_callbackQueue;
+ (id)_postProcessingQueue;
+ (id)_incompleteMetadataRequests;
+ (id)requestMetadataForURL:(id)url completionHandler:(id /* block */)handler;
+ (id)_requestMetadataForRequest:(id)request completionHandler:(id /* block */)handler;
+ (id)requestMetadataForWebView:(id)view completionHandler:(id /* block */)handler;
+ (id)_copyDefaultWebViewConfiguration;
+ (id)_defaultUserAgent;
+ (void)_requestSourceApplicationMetadataForBundleIdentifier:(id)identifier completionHandler:(id /* block */)handler;

/* instance methods */
- (id)init;
- (void)dealloc;
- (BOOL)_shouldFailFetchDueToLockdownModeWithCompletionHandler:(id /* block */)handler;
- (void)_willStartFetchingMetadata;
- (void)startFetchingMetadataForURL:(id)url completionHandler:(id /* block */)handler;
- (void)startFetchingMetadataForRequest:(id)request completionHandler:(id /* block */)handler;
- (void)_internalStartFetchingMetadataFromURLRequest;
- (id)_startFetchingMetadataForURL:(id)url completionHandler:(id /* block */)handler;
- (id)_startFetchingMetadataForRequest:(id)request completionHandler:(id /* block */)handler;
- (void)startFetchingMetadataForWebView:(id)view completionHandler:(id /* block */)handler;
- (void)_internalStartFetchingMetadataForWebView:(id)view isNonAppInitiated:(BOOL)initiated completionHandler:(id /* block */)handler;
- (id)_startFetchingMetadataForWebView:(id)view completionHandler:(id /* block */)handler;
- (id)_startFetchingMetadataForWebView:(id)view isNonAppInitiated:(BOOL)initiated completionHandler:(id /* block */)handler;
- (void)startFetchingSubresourcesForPartialMetadata:(id)metadata completionHandler:(id /* block */)handler;
- (void)_startFetchingSubresourcesForPartialMetadata:(id)metadata isNonAppInitiated:(BOOL)initiated completionHandler:(id /* block */)handler;
- (void)_startWatchdogTimer;
- (void)_stopWatchdogTimer;
- (void)_setMetadata:(id)metadata onlyUpgradeFields:(BOOL)fields;
- (void)_fetchMetadataFromWebView;
- (BOOL)_switchToSpecializationIfPossibleForMIMEType:(id)mimetype URL:(id)url hasLoadedResource:(BOOL)resource;
- (BOOL)_switchToSpecializationIfPossibleForMetadata:(id)metadata URL:(id)url;
- (BOOL)_switchToSpecializationIfPossibleForURL:(id)url;
- (void)_generateSpecializationIfPossibleForCompleteMetadata:(id)metadata completionHandler:(id /* block */)handler;
- (void)cancel;
- (void)_cancelDueToTimeout;
- (void)webView:(id)view decidePolicyForNavigationAction:(id)action decisionHandler:(id /* block */)handler;
- (void)webView:(id)view decidePolicyForNavigationResponse:(id)response decisionHandler:(id /* block */)handler;
- (void)webView:(id)view didStartProvisionalNavigation:(id)navigation;
- (void)webView:(id)view didFinishNavigation:(id)navigation;
- (void)webView:(id)view didFailNavigation:(id)navigation withError:(id)error;
- (void)webView:(id)view didFailProvisionalNavigation:(id)navigation withError:(id)error;
- (void)webViewWebContentProcessDidTerminate:(id)terminate;
- (void)_fetchedMetadata:(id)metadata;
- (id)subresourceFetcherConfiguration;
- (void)_fetchImplicitIcons;
- (void)_fetchSubresources;
- (void)_redistinguishImagesAndIcons;
- (void)_simplifyTitle;
- (void)_propagateYouTubeTimestamps;
- (void)_failedWithErrorCode:(long long)code underlyingError:(id)error;
- (void)_completedWithError:(id)error;
- (void)_postProcessResolvedMetadataWithCompletionHandler:(id /* block */)handler;
- (void)_internalPostProcessResolvedMetadataWithCompletionHandler:(id /* block */)handler;
- (void)metadataProviderSpecialization:(id)specialization didFetchPreliminaryMetadata:(id)metadata;
- (void)metadataProviderSpecialization:(id)specialization didCompleteWithMetadata:(id)metadata;
- (void)metadataProviderSpecializationDidFail:(id)fail;
- (void)_setShouldDownloadMediaSubresources:(BOOL)subresources;
- (void)_setShouldDownloadImageSubresources:(BOOL)subresources;
@end

#endif /* LPMetadataProvider_h */
