//
//   Generated by https://github.com/blacktop/ipsw (Version: 3.1.454, BuildTime: 2024-02-08T22:07:34Z)
//
//    - LC_BUILD_VERSION:  Platform: watchOSSimulator, MinOS: 10.2, SDK: 10.2, Tool: ld (902.8)
//    - LC_SOURCE_VERSION: 2021.300.9.2.0
//
#ifndef NMSMusicRecommendationManager_h
#define NMSMusicRecommendationManager_h
@import Foundation;

#include "NMSInitialCloudLibraryImportObserver.h"
#include "NMSMusicCatalogRecommendationsUpdater.h"

@class NSArray, NSSet;
@protocol OS_dispatch_group, OS_dispatch_queue, OS_dispatch_source;

@interface NMSMusicRecommendationManager : NSObject {
  /* instance variables */
  NSArray *_recommendations;
  NSObject<OS_dispatch_queue> *_queue;
  NMSMusicCatalogRecommendationsUpdater *_catalogRecommendationsUpdater;
  NSObject<OS_dispatch_source> *_libraryRecommendationExpirationTimer;
  NSObject<OS_dispatch_source> *_artworkRetryTimer;
  unsigned long long _artworkRetryAttempt;
  NSSet *_artworkRetryPlaylists;
  NSObject<OS_dispatch_group> *_initialRecommendationsFetchGroup;
  BOOL _hasFetchedInitialRecommendations;
  NMSInitialCloudLibraryImportObserver *_initialCloudLibraryImportObserver;
}

@property (nonatomic) BOOL wantsContentsUpdate;

/* class methods */
+ (id)sharedManager;
+ (BOOL)_shouldComputeLibraryRecommendations;

/* instance methods */
- (id)init;
- (void)dealloc;
- (void)_registerForPairingFinishedNotification;
- (void)_unregisterForPairingFinishedNotification;
- (void)fetchRecommendationsWithQueue:(id)queue completion:(id /* block */)completion;
- (BOOL)hasSelectedRecommendationWithIdentifier:(id)identifier;
- (void)persistRecommendationsSelections:(id)selections;
- (void)_handleSubscriptionStatusDidChangeNotification:(id)notification;
- (void)_handleActiveAccountDidChangeNotification:(id)notification;
- (void)_handlePairingFinishedNotification:(id)notification;
- (void)_handleRecommendationStoreContentsDidChangeNotification:(id)notification;
- (void)_handleRecommendationSelectionsDidChangeNotification:(id)notification;
- (void)_handleMediaLibraryEntitiesAddedOrRemovedNotification:(id)notification;
- (void)_handleMediaLibraryDidChangeNotification:(id)notification;
- (void)_handleMediaLibraryDynamicPropertiesDidChangeNotification:(id)notification;
- (id)_recommendations;
- (void)_reloadRecommendationContentsIfNecessary;
- (void)_reloadRecommendationsFromDefaultsWithCompletion:(id /* block */)completion;
- (void)_notifyMusicRecommendationsDidUpdateNotification;
- (void)_reloadLibraryRecommendations;
- (id)_sortedContainersBasedOnRecency;
- (id)_fetchAddedDateForContainer:(id)container;
- (void)_finishLoadingContentsWithResponse:(id)response;
- (BOOL)_updateWithRecommendations:(id)recommendations;
- (BOOL)_updateRecommendationsSelections;
- (void)_persistUpdatedRecommendationsWithResponse:(id)response;
- (void)_removeLegacyRecommendationsDefaultsIfNecessary;
- (void)_removePreviousRecommendationDefaults;
- (void)_removePreviousCachedRecommendationsResponses;
- (void)_scheduleNextLibraryRecommendationReloadIfNecessary;
- (void)_invalidateLibraryRecommendationExpirationTimer;
- (BOOL)_isLibraryRecommendationExpired;
- (id)_expirationDateForUpdateDate:(id)date withOffsetDays:(long long)days;
- (void)_importArtworkIfNecessaryForObjectsIgnorePreviousCache:(BOOL)cache;
- (void)_importArtworkForPlaylists:(id)playlists;
- (void)_handleArtworksDidUpdateNotification:(id)notification;
- (void)_retryFailedArtworkImportsIfNecessary;
- (void)_setArtworkImageCache:(id)cache withToken:(id)token;
- (void)_deleteCachedArtworksWithTokens:(id)tokens;
- (void)_startArtworkRetryTimer;
- (void)_invalidateArtworkRetryTimer;
@end

#endif /* NMSMusicRecommendationManager_h */
