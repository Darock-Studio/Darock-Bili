//
//   Generated by https://github.com/blacktop/ipsw (Version: 3.1.454, BuildTime: 2024-02-08T22:07:34Z)
//
//    - LC_BUILD_VERSION:  Platform: watchOSSimulator, MinOS: 10.2, SDK: 10.2, Tool: ld (902.8)
//    - LC_SOURCE_VERSION: 1852.4.7.0.3
//
#ifndef _CDInteractionCache_h
#define _CDInteractionCache_h
@import Foundation;

#include "_CDInteractionStore.h"

@class NSArray, NSCountedSet, NSMutableArray, NSMutableDictionary, NSPredicate;
@protocol OS_dispatch_queue, OS_dispatch_source;

@interface _CDInteractionCache : NSObject {
  /* instance variables */
  NSObject<OS_dispatch_queue> *_queue;
  NSObject<OS_dispatch_source> *_timer;
  NSMutableArray *_mutableInteractions;
  unsigned long long _minCacheSize;
  NSCountedSet *_conversationCandidates;
  NSMutableDictionary *_mostRecentInteractionsByTaxonomyAndIdentifier;
  BOOL _needsRefetch;
  struct os_unfair_lock_s { unsigned int _os_unfair_lock_opaque; } _lock;
}

@property (readonly, nonatomic) _CDInteractionStore *interactionStore;
@property (readonly, nonatomic) unsigned long long size;
@property (readonly, nonatomic) NSPredicate *predicate;
@property (readonly, nonatomic) id /* block */ filterBlock;
@property (readonly, copy, nonatomic) NSArray *interactions;

/* instance methods */
- (id)initWithInteractionStore:(id)store size:(unsigned long long)size queryPredicate:(id)predicate filterBlock:(id /* block */)block;
- (id)initForTesting;
- (id)initForTestingWithSize:(unsigned long long)size;
- (id)init;
- (id)_init;
- (id)uniqueConversationCandidates;
- (BOOL)containsUniqueCacheCandidate:(id)candidate;
- (void)debounceRefetch;
- (void)_invalidate;
- (void)_refetch;
- (void)_forceRefetch;
- (void)_countConversationIDsForInteraction:(id)interaction deleted:(BOOL)deleted;
- (void)_updateMostRecentInteractionsWithInteraction:(id)interaction deleted:(BOOL)deleted;
- (id)mostRecentInteractionForCandidateIdentifier:(id)identifier direction:(long long)direction mechanism:(long long)mechanism;
- (id)mostRecentInteractionForCandidateIdentifier:(id)identifier;
- (id)mostRecentInteractionForCandidateIdentifier:(id)identifier direction:(long long)direction;
- (void)_rebuildMostRecentInteractions;
- (void)interactionsRecorded:(id)recorded;
- (void)interactionsDeleted:(id)deleted;
- (void)cacheInteractionsForTesting:(id)testing;
- (void)deleteInteractionsForTesting:(id)testing;
- (void)_cacheInteractions:(id)interactions;
- (void)_deleteInteractions:(id)interactions;
- (void)_handleInteractionRemoval:(id)removal;
@end

#endif /* _CDInteractionCache_h */
