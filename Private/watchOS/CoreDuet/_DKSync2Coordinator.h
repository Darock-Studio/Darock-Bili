//
//   Generated by https://github.com/blacktop/ipsw (Version: 3.1.454, BuildTime: 2024-02-08T22:07:34Z)
//
//    - LC_BUILD_VERSION:  Platform: watchOSSimulator, MinOS: 10.2, SDK: 10.2, Tool: ld (902.8)
//    - LC_SOURCE_VERSION: 1852.4.7.0.3
//
#ifndef _DKSync2Coordinator_h
#define _DKSync2Coordinator_h
@import Foundation;

#include "_DKSyncContextObject.h"
#include "APSConnectionDelegate-Protocol.h"
#include "NSObject-Protocol.h"
#include "_CDMutablePerfMetric.h"
#include "_CDPeriodicSchedulerJob.h"
#include "_DKDataProtectionStateMonitor.h"
#include "_DKKeyValueStore-Protocol.h"
#include "_DKKnowledgeStorage.h"
#include "_DKKnowledgeStorageEventNotificationDelegate-Protocol.h"
#include "_DKSync2State.h"
#include "_DKSyncCoordinator-Protocol.h"
#include "_DKSyncLocalKnowledgeStorage-Protocol.h"
#include "_DKSyncRemoteKnowledgeStorage-Protocol.h"
#include "_DKSyncRemoteKnowledgeStorageFetchDelegate-Protocol.h"
#include "_DKSyncToggle.h"
#include "_DKThrottledActivity.h"

@class APSConnection, NSMutableArray, NSMutableSet, NSString, NSUUID;
@protocol OS_xpc_object;

@interface _DKSync2Coordinator : _DKSyncContextObject<APSConnectionDelegate, _DKKnowledgeStorageEventNotificationDelegate, _DKSyncRemoteKnowledgeStorageFetchDelegate, _DKSyncCoordinator> {
  /* instance variables */
  _DKThrottledActivity *_activityThrottler;
  NSObject<NSObject> *_observerToken;
  NSMutableSet *_busyTransactions;
  NSMutableArray *_insertedSyncedEvents;
  NSMutableArray *_deletedSyncedEvents;
  NSMutableSet *_activatedPeers;
  _DKDataProtectionStateMonitor *_dataProtectionMonitor;
  BOOL _hasRegisteredOptionalObservers;
  BOOL _isEnabled;
  NSString *_triggeredSyncDelayActivityName;
  NSString *_syncActivityName;
  _DKSync2State *_syncState;
  double _periodicJobInterval;
  BOOL _databaseObserversRegistered;
  BOOL _cloudDeviceCountChangedObserverRegistered;
  BOOL _cloudSyncAvailablityObserverRegistered;
  BOOL _rapportAvailablityObserverRegistered;
  BOOL _siriSyncEnabledObserverRegistered;
  BOOL _syncPolicyChangedObserverRegistered;
  APSConnection *_connection;
  NSMutableSet *_streamNamesObservedForAdditions;
  NSMutableSet *_streamNamesObservedForDeletions;
  _CDMutablePerfMetric *_perfMetric;
  struct _CDPerfEvent { double startTime; double endTime; } _perfEvent;
  _DKSyncToggle *_syncEnabledToggler;
  _DKSyncToggle *_someTransportIsAvailableToggler;
  _DKSyncToggle *_cloudIsAvailableToggler;
  _DKSyncToggle *_rapportIsAvailableToggler;
  _CDPeriodicSchedulerJob *_periodicJob;
  BOOL _triggeredSyncActivityRegistered;
  NSObject<OS_xpc_object> *_triggeredSyncActivity;
  BOOL _isBusy;
  BOOL _hasSyncedUpHistoryToCloud;
  _DKKnowledgeStorage *_storage;
  NSObject<_DKKeyValueStore> *_keyValueStore;
  NSObject<_DKSyncLocalKnowledgeStorage> *_localStorage;
  NSObject<_DKSyncRemoteKnowledgeStorage> *_transportCloudDown;
  NSObject<_DKSyncRemoteKnowledgeStorage> *_transportCloudUp;
  NSObject<_DKSyncRemoteKnowledgeStorage> *_transportRapport;
}

@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;
@property (readonly, nonatomic) _DKSyncType *syncType;
@property (readonly, nonatomic) NSUUID *deviceUUID;

/* instance methods */
- (id)sortedEventsFromSyncWindows:(id)windows streamNames:(id)names limit:(unsigned long long)limit fetchOrder:(long long)order error:(id *)error;
- (id)sortedEventsFromSyncWindows:(id)windows streamNames:(id)names compatibility:(id)compatibility limit:(unsigned long long)limit fetchOrder:(long long)order error:(id *)error;
- (id)deletedEventIDsSinceDate:(id)date streamNames:(id)names limit:(unsigned long long)limit endDate:(id *)date error:(id *)error;
- (void)knowledgeStorage:(id)storage didHaveInsertsAndDeletesWithCount:(unsigned long long)count;
- (void)knowledgeStorage:(id)storage didInsertSyncedEvents:(id)events;
- (void)knowledgeStorage:(id)storage didDeleteSyncedEvents:(id)events;
- (void)knowledgeStorage:(id)storage didInsertEventsWithStreamNameCounts:(id)counts;
- (void)_databaseDidDeleteFromStreamNameCounts:(id)counts;
- (void)knowledgeStorage:(id)storage didDeleteEventsWithStreamNameCounts:(id)counts;
- (void)connection:(id)connection didReceivePublicToken:(id)token;
- (void)connection:(id)connection didReceiveIncomingMessage:(id)message;
- (id)initWithContext:(id)context;
- (void)dealloc;
- (void)_syncEnabledToggle;
- (void)_syncDisabledToggle;
- (void)_someTransportIsAvailableToggle;
- (void)_noTransportIsAvailableToggle;
- (void)_cloudIsAvailableToggle;
- (void)_cloudIsUnavailableToggle;
- (void)_rapportIsAvailableToggle;
- (void)_rapportIsUnavailableToggle;
- (void)setupStorage;
- (void)start;
- (id)policyForSyncTransportType:(long long)type;
- (void)handleStatusChangeForPeer:(id)peer previousTransports:(long long)transports;
- (void)syncWithReply:(id /* block */)reply;
- (void)synchronizeWithUrgency:(unsigned long long)urgency client:(id)client reply:(id /* block */)reply;
- (void)deleteRemoteStateWithReply:(id /* block */)reply;
- (void)_cloudSyncAvailabilityDidChange:(id)change;
- (void)_syncPolicyDidChange:(id)change;
@end

#endif /* _DKSync2Coordinator_h */
