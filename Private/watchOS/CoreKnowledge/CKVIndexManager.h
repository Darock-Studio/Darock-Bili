//
//   Generated by https://github.com/blacktop/ipsw (Version: 3.1.454, BuildTime: 2024-02-08T22:07:34Z)
//
//    - LC_BUILD_VERSION:  Platform: watchOSSimulator, MinOS: 10.2, SDK: 10.2, Tool: ld (902.8)
//    - LC_SOURCE_VERSION: 3302.3.1.0.0
//
#ifndef CKVIndexManager_h
#define CKVIndexManager_h
@import Foundation;

#include "CKVFilesystemBase.h"
#include "CKVGlobalInfoLog.h"
#include "CKVSettings.h"
#include "KVSkitAccessProvider-Protocol.h"

@class NSDate, NSMutableDictionary, TRIClient;
@protocol OS_dispatch_queue;

@interface CKVIndexManager : NSObject<KVSkitAccessProvider> {
  /* instance variables */
  CKVFilesystemBase *_filesystemBase;
  NSObject<OS_dispatch_queue> *_queue;
  NSDate *_migrationStartTime;
  NSMutableDictionary *_instanceLogCache;
  NSMutableDictionary *_readOnlyDatabaseCache;
  NSMutableDictionary *_readOnlySkitCache;
  CKVGlobalInfoLog *_globalLog;
  TRIClient *_trialClient;
}

@property (readonly, nonatomic) CKVSettings *settings;

/* class methods */
+ (id)sharedReaderInstance;

/* instance methods */
- (id)init;
- (id)initWithFilesystemBase:(id)base settings:(id)settings isWriter:(BOOL)writer;
- (void)_registerTrialExperimentUpdateHandler;
- (id)_openReadWriteDatabaseOrCreate:(BOOL)create atDataDirectory:(id)directory description:(id)description;
- (id)_writeOnlySkitAccessAtDataDirectory:(id)directory description:(id)description flushThreshold:(unsigned long long)threshold;
- (void)_speechProfileAccessForUser:(id)user usingBlock:(id /* block */)block;
- (void)_speechProfileAccessAtDataDirectory:(id)directory userId:(id)id description:(id)description usingBlock:(id /* block */)block;
- (id)_instanceLogAtDataDirectory:(id)directory;
- (id)_dataDirectoryURLForUser:(id)user;
- (BOOL)_dataDirectoryExists:(id)exists;
- (id)_localDataDirectoryURL;
- (id)_localDatabaseFileURL;
- (id)_localSkitDirectoryURL;
- (id)userIdHash:(id)hash;
- (int)_protectionClassForDataDirectory:(id)directory;
- (id)_snapshotDirectoryURL;
- (void)_loadGlobalLog;
- (void)resetWithFilesystemBase:(id)base;
- (void)closeAllConnections;
- (void)_clearAllCaches;
- (void)_clearAllCachedAccessAtDataDirectory:(id)directory;
- (void)_clearCachedDatabaseAccessAtDataDirectory:(id)directory;
- (void)_clearCachedSkitAccessAtDataDirectory:(id)directory;
- (void)_cacheAllLocalAccess;
- (id)_cachedReadOnlyDatabaseAccessAtDataDirectoryURL:(id)url;
- (id)accessReadOnlyDatabaseForUser:(id)user;
- (id)accessReadOnlyDatabaseForAllUsers;
- (id)_accessReadOnlyDatabaseForAllUsers;
- (id)_cachedReadOnlySkitAccessAtDataDirectoryURL:(id)url;
- (id)accessReadOnlySkitForUser:(id)user;
- (BOOL)supportsMultiUser;
- (BOOL)setItems:(id)items error:(id *)error;
- (BOOL)_resetAllState;
- (BOOL)resetAllState;
- (BOOL)_destroyStateAtDataDirectory:(id)directory;
- (void)_verifyAllManagedDataDirectories;
- (BOOL)submitDatabaseTransactionForUser:(id)user usingBlock:(id /* block */)block;
- (BOOL)_executeDatabaseTransactionForUser:(id)user usingBlock:(id /* block */)block;
- (BOOL)_executeDatabaseTransactionWithDatabase:(id)database instanceLog:(id)log description:(id)description usingBlock:(id /* block */)block;
- (BOOL)submitSkitRebuildTransactionForUser:(id)user usingBlock:(id /* block */)block;
- (BOOL)_executeSkitRebuildTransactionForUser:(id)user usingBlock:(id /* block */)block;
- (BOOL)_executeSkitRebuildTransactionAtDataDirectory:(id)directory description:(id)description usingBlock:(id /* block */)block;
- (unsigned short)submitDatabaseAndSkitTransactionForUser:(id)user usingBlock:(id /* block */)block;
- (unsigned short)_executeDatabaseAndSkitTransactionForUser:(id)user usingBlock:(id /* block */)block;
- (BOOL)_destroySkitAtDataDirectory:(id)directory;
- (void)performSkitVerification;
- (void)_verifySkitAtDataDirectory:(id)directory description:(id)description clean:(BOOL)clean shouldDefer:(id /* block */)defer;
- (void)registerSpeechProfileUpdateForUser:(id)user originAppId:(id)id itemType:(long long)type fieldTypes:(id)types options:(unsigned short)options;
- (BOOL)rebuildSpeechProfileForUser:(id)user;
- (BOOL)_rebuildSpeechProfileForUser:(id)user;
- (BOOL)_destroySpeechProfileAtDataDirectory:(id)directory;
- (void)performSpeechProfileVerification;
- (void)_verifySpeechProfileAtDataDirectory:(id)directory description:(id)description userId:(id)id clean:(BOOL)clean;
- (BOOL)initiateMigration:(BOOL)migration;
- (BOOL)_initiateMigration:(BOOL)migration;
- (BOOL)_shouldRunMigration;
- (void)completeMigration;
- (unsigned short)performMaintenanceWithShouldDefer:(id /* block */)defer;
- (void)_refreshRankedItemCachesAtDataDirectory:(id)directory description:(id)description userId:(id)id;
- (BOOL)deleteDataForUser:(id)user;
- (BOOL)deleteDataForUser:(id)user deviceId:(id)id ifMatching:(BOOL)matching didDelete:(BOOL *)delete;
- (BOOL)_deleteDataForUser:(id)user deviceId:(id)id ifMatching:(BOOL)matching didDelete:(BOOL *)delete;
- (BOOL)_shouldCleanupDatabaseAtDataDirectory:(id)directory instanceLog:(id)log;
- (id)captureProfileSnapshot:(id)snapshot;
- (id)findProfileSnapshotsNearDate:(id)date;
- (void)_cleanupSnapshotDirectory;
- (BOOL)_purgeProfileSnapshots;
- (unsigned char)storedEnablementOptions;
- (BOOL)updateStoredEnablementOptions:(unsigned char)options;
- (void)storedSiriLanguageCode:(id *)code dictationLanguageCodes:(id *)codes;
- (BOOL)updateStoredSiriLanguageCode:(id)code dictationLanguageCodes:(id)codes;
- (id)_getFilesSortedByCreationDateForDirectoryPath:(id)path;
- (id)lastMaintenanceForUser:(id)user;
@end

#endif /* CKVIndexManager_h */
