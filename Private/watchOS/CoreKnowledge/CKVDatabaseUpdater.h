//
//   Generated by https://github.com/blacktop/ipsw (Version: 3.1.454, BuildTime: 2024-02-08T22:07:34Z)
//
//    - LC_BUILD_VERSION:  Platform: watchOSSimulator, MinOS: 10.2, SDK: 10.2, Tool: ld (902.8)
//    - LC_SOURCE_VERSION: 3302.3.1.0.0
//
#ifndef CKVDatabaseUpdater_h
#define CKVDatabaseUpdater_h
@import Foundation;

#include "CKVDatabaseReadWriteAccess-Protocol.h"

@class NSMutableDictionary, NSNumber, NSString;

@interface CKVDatabaseUpdater : NSObject {
  /* instance variables */
  NSObject<CKVDatabaseReadWriteAccess> *_database;
  NSString *_requestDescription;
  NSNumber *_startTimeMicros;
  NSNumber *_itemTypeNumber;
  NSString *_originAppId;
  NSString *_deviceId;
  NSString *_userId;
  NSNumber *_versionNumber;
  NSMutableDictionary *_commandCache;
  BOOL _isLocalDevice;
  NSNumber *_highestContentSequenceNumber;
  NSNumber *_datasetRowId;
  NSNumber *_deviceRowId;
}

@property (readonly, nonatomic) unsigned int datasetItemCount;
@property (readonly, nonatomic) unsigned int modifiedRowCount;
@property (readonly, nonatomic) unsigned long long updateVersion;
@property (readonly, nonatomic) unsigned long long priorVersion;
@property (readonly, nonatomic) NSNumber *updateValidityHash;
@property (readonly, nonatomic) NSNumber *datasetHash;
@property (readonly, nonatomic) NSNumber *priorValidityHash;
@property (readonly, nonatomic) unsigned long long priorOptions;

/* class methods */
+ (BOOL)deleteTombstonesInDatabase:(id)database instanceLog:(id)log shouldDefer:(id /* block */)defer;

/* instance methods */
- (id)initWithDatabase:(id)database instanceLog:(id)log request:(id)request startTimeMicros:(long long)micros;
- (id)description;
- (id)_datasetRowIdCriterion;
- (id)_itemCriterionWithItemIdHash:(id)hash;
- (BOOL)_registerDevice;
- (BOOL)_registerDataset;
- (BOOL)enumerateAndDeleteAllLocalInstancesUsingBlock:(id /* block */)block;
- (BOOL)deleteLocalInstanceRowId:(id)id outCompositeId:(id *)id;
- (BOOL)deleteItemIdHash:(id)hash outCompositeId:(id *)id;
- (BOOL)_deleteLocalInstanceRowId:(id)id outProvenanceRowId:(id *)id;
- (BOOL)_deleteItemIdHash:(id)hash outProvenanceRowId:(id *)id;
- (BOOL)_tombstoneProvenanceRowId:(id)id outCompositeId:(id *)id;
- (BOOL)_insertDatasetReturningRowId:(id *)id;
- (BOOL)_insertDeviceReturningRowId:(id *)id;
- (BOOL)insertItemWithItemIdHash:(id)hash instanceHash:(id)hash contentHash:(id)hash metaContent:(id)content content:(id)content ordinal:(unsigned long long)ordinal;
- (BOOL)_insertMetaContent:(id)content instanceHash:(id)hash;
- (BOOL)_insertContent:(id)content contentHash:(id)hash outSequenceNumber:(id *)number;
- (BOOL)_insertProvenanceForItemWithContentHash:(id)hash contentSequenceNumber:(id)number instanceHash:(id)hash onDeviceRowId:(id)id insertedRowId:(id *)id;
- (BOOL)_insertLocalInstanceForItemWithItemIdHash:(id)hash provenanceRowId:(id)id ordinal:(unsigned long long)ordinal;
- (BOOL)_selectDeviceRowId:(id *)id isLocal:(BOOL *)local;
- (BOOL)_selectDatasetRowId:(id *)id version:(unsigned long long *)version validityHash:(id *)hash options:(unsigned long long *)options;
- (BOOL)_selectDatasetItemCount:(id *)count;
- (BOOL)_selectHighestKnownContentSequenceNumber:(id *)number;
- (BOOL)selectWithItemIdHash:(id)hash outLocalInstanceRowId:(id *)id outProvenanceRowId:(id *)id outInstanceHash:(id *)hash outContentHash:(id *)hash isDuplicate:(BOOL *)duplicate;
- (BOOL)_selectProvenenceWithRowId:(id)id outInstanceHash:(id *)hash outContentHash:(id *)hash;
- (BOOL)_selectProvenenceWithContentHash:(id)hash outSequenceNumber:(id *)number;
- (BOOL)enumerateUnmodifiedLocalInstancesUsingBlock:(id /* block */)block;
- (BOOL)updateDatasetOptions:(unsigned long long)options;
- (BOOL)_updateDatasetVersionAndValidity;
- (BOOL)updateLocalInstanceRowId:(id)id provenanceRowId:(id)id instanceHash:(id)hash metaContent:(id)content ordinal:(unsigned long long)ordinal;
- (BOOL)updateLocalInstanceRowId:(id)id provenanceRowId:(id)id instanceHash:(id)hash contentHash:(id)hash metaContent:(id)content content:(id)content ordinal:(unsigned long long)ordinal;
- (BOOL)_updateLocalInstanceRowId:(id)id provenanceRowId:(id)id instanceHash:(id)hash contentHash:(id)hash metaContent:(id)content content:(id)content ordinal:(unsigned long long)ordinal;
- (BOOL)updateLocalInstanceRowId:(id)id ordinal:(unsigned long long)ordinal;
- (BOOL)updateLocalInstanceRowId:(id)id provenanceRowId:(id)id ordinal:(unsigned long long)ordinal;
- (BOOL)_updateProvenanceRowId:(id)id instanceHash:(id)hash contentHash:(id)hash contentSequenceNumber:(id)number insertedProvenanceRowId:(id *)id;
- (BOOL)_updateProvenanceRowId:(id)id instanceHash:(id)hash;
@end

#endif /* CKVDatabaseUpdater_h */
