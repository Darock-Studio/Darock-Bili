//
//   Generated by https://github.com/blacktop/ipsw (Version: 3.1.454, BuildTime: 2024-02-08T22:07:34Z)
//
//    - LC_BUILD_VERSION:  Platform: watchOSSimulator, MinOS: 10.2, SDK: 10.2, Tool: ld (902.8)
//    - LC_SOURCE_VERSION: 3774.300.42.0.0
//
#ifndef MFMessagePersistence_iOS_h
#define MFMessagePersistence_iOS_h
@import Foundation;

#include "EDMessagePersistence.h"
#include "EDMessageChangeHookResponder-Protocol.h"
#include "EFLoggable-Protocol.h"
#include "EFScheduler-Protocol.h"
#include "MFMailMessageLibrary.h"
#include "MFMailMessageLibraryQueryTransformer.h"

@class EFLazyCache, NSMutableDictionary, NSString;
@protocol MFMessageSummaryLoaderProvider, OS_dispatch_queue;

@interface MFMessagePersistence_iOS : EDMessagePersistence<EFLoggable, EDMessageChangeHookResponder> {
  /* instance variables */
  struct os_unfair_lock_s { unsigned int _os_unfair_lock_opaque; } _summaryLock;
  NSMutableDictionary *_summaryLoaders;
  EFLazyCache *_obsoleteGlobalMessageIDToDatabaseIDMap;
  MFMailMessageLibrary *_library;
  MFMailMessageLibraryQueryTransformer *_queryTransformer;
  NSObject<EFScheduler> *_networkContentLoadScheduler;
  NSObject<EFScheduler> *_offlineContentLoadScheduler;
  NSObject<OS_dispatch_queue> *_requestSummaryQueue;
}

@property (retain, nonatomic) NSObject<MFMessageSummaryLoaderProvider> *summaryLoaderProvider;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;

/* class methods */
+ (id)log;

/* instance methods */
- (id)initWithMailboxPersistence:(id)persistence database:(id)database userProfileProvider:(id)provider blockedSenderManager:(id)manager vipReader:(id)reader hookRegistry:(id)registry library:(id)library;
- (id)persistedMessagesForDatabaseIDs:(id)ids requireProtectedData:(BOOL)data temporarilyUnavailableDatabaseIDs:(id *)ids;
- (id)persistedMessageForOutgoingMessage:(id)message isDraft:(BOOL)draft;
- (id)sqlQueryForQuery:(id)query connection:(id)connection;
- (id)expressionForFindingOnlyJournaledMessages;
- (id)expressionForFilteringUnavailableMessages;
- (id)groupedMessagesCountByMailboxMatchingQuery:(unsigned long long)query variable:(id)variable;
- (id)requestContentForMessageObjectID:(id)id requestID:(unsigned long long)id options:(id)options delegate:(id)delegate completionHandler:(id /* block */)handler;
- (void)generateSummaryForMessage:(id)message downloadIfNecessary:(BOOL)necessary;
- (id)requestSummaryForMessageObjectID:(id)id;
- (id)_requestSummaryForLibraryMessage:(id)message;
- (id)libraryMessageForMessageObjectID:(id)id;
- (id)_libraryMessageForMessageObjectID:(id)id preferNonOutgoingMessages:(BOOL)messages;
- (id)enabledAccountMailboxesExpression;
- (id)cachedDatabaseIDsDictionaryForGlobalMessageIDs:(id)ids;
- (void)setContentProtectionForAttachmentFile:(id)file;
- (long long)globalIDForMessageWithDatabaseID:(long long)id mailboxScope:(id *)scope;
- (id)createContextForIteration;
- (id)persistedMessageForSQLRow:(id)sqlrow connection:(id)connection iterationContext:(id)context;
- (void)persistenceDidChangeGlobalMessageID:(long long)id orConversationID:(long long)id message:(id)message generationWindow:(id)window;
- (id)collectStatistics;
@end

#endif /* MFMessagePersistence_iOS_h */
