//
//   Generated by https://github.com/blacktop/ipsw (Version: 3.1.454, BuildTime: 2024-02-08T22:07:34Z)
//
//    - LC_BUILD_VERSION:  Platform: watchOSSimulator, MinOS: 10.2, SDK: 10.2, Tool: ld (902.8)
//    - LC_SOURCE_VERSION: 617.1.17.12.4
//
#ifndef WBSFaviconProviderPersistenceController_h
#define WBSFaviconProviderPersistenceController_h
@import Foundation;

#include "WBSDataCacheDelegate-Protocol.h"
#include "WBSFaviconProviderDatabaseController.h"
#include "WBSFaviconProviderPrivateCache.h"
#include "WBSFaviconProviderRecordCache.h"
#include "WBSOnDiskDataCache.h"
#include "WBSSQLiteStoreDelegate-Protocol.h"

@class NSMapTable, NSString, NSURL;
@protocol OS_dispatch_queue;

@interface WBSFaviconProviderPersistenceController : NSObject<WBSDataCacheDelegate, WBSSQLiteStoreDelegate> {
  /* instance variables */
  NSURL *_baseURL;
  WBSOnDiskDataCache *_faviconDiskCache;
  WBSFaviconProviderDatabaseController *_faviconDatabase;
  WBSFaviconProviderRecordCache *_recordsCache;
  WBSFaviconProviderPrivateCache *_privateCache;
  NSMapTable *_inMemoryImageCache;
  id /* block */ _setUpCompletionHandler;
  NSObject<OS_dispatch_queue> *_internalQueue;
  long long _controllerState;
  struct CGSize { double width; double height; } _preferredIconSize;
  BOOL _isReadOnly;
}

@property (readonly, nonatomic) NSURL *databaseURL;
@property (readonly, nonatomic) NSURL *diskCacheURL;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;

/* instance methods */
- (id)init;
- (id)initWithPersistenceBaseURL:(id)url databaseName:(id)name preferredIconSize:(struct CGSize { double x0; double x1; })size isReadOnly:(BOOL)only;
- (void)openAndCheckIntegrity:(BOOL)integrity createIfNeeded:(BOOL)needed fallBackToMemoryStoreIfError:(BOOL)error completionHandler:(id /* block */)handler;
- (void)closeWithCompletionHandler:(id /* block */)handler;
- (void)savePendingChangesBeforeTermination;
- (void)flushPrivateDataFromMemoryWithCompletionHandler:(id /* block */)handler;
- (void)_finishSetUpWithStatus:(long long)status;
- (long long)_faviconStatusFromWBSSQLStoreStatus:(long long)status;
- (id)_imageFromURL:(id)url;
- (void)setIconData:(id)data forPageURLString:(id)urlstring iconURLString:(id)urlstring iconSize:(struct CGSize { double x0; double x1; })size hasGeneratedResolutions:(BOOL)resolutions isPrivate:(BOOL)private completionHandler:(id /* block */)handler;
- (void)setIconIsRejectedResource:(BOOL)resource forPageURLString:(id)urlstring iconURLString:(id)urlstring isPrivate:(BOOL)private completionHandler:(id /* block */)handler;
- (void)rejectedResourceInfosForPageURLString:(id)urlstring iconURLString:(id)urlstring includingPrivateData:(BOOL)data completionHandler:(id /* block */)handler;
- (void)linkPageURLString:(id)urlstring toIconURLString:(id)urlstring isPrivate:(BOOL)private completionHandler:(id /* block */)handler;
- (void)removeIconWithPageURLString:(id)urlstring completionHandler:(id /* block */)handler;
- (void)removeAllIconsWithCompletionHandler:(id /* block */)handler;
- (void)removeIconsWithURLStringsNotFoundIn:(id)in completionHandler:(id /* block */)handler;
- (void)removeIconFilesNotReferencedInDatabaseWithCompletionHandler:(id /* block */)handler;
- (void)iconForPageURLString:(id)urlstring includingPrivateData:(BOOL)data completionHandler:(id /* block */)handler;
- (void)iconForIconURLString:(id)urlstring includingPrivateData:(BOOL)data completionHandler:(id /* block */)handler;
- (void)_iconForIconUUID:(id)uuid completionHandler:(id /* block */)handler;
- (void)iconInfoForPageURLString:(id)urlstring includingPrivateData:(BOOL)data completionHandler:(id /* block */)handler;
- (void)iconInfoForIconURLString:(id)urlstring includingPrivateData:(BOOL)data completionHandler:(id /* block */)handler;
- (void)firstIconForVariantsOfPageURLString:(id)urlstring includingPrivateData:(BOOL)data completionHandler:(id /* block */)handler;
- (void)firstIconForVariantsOfDomainString:(id)string includingPrivateData:(BOOL)data completionHandler:(id /* block */)handler;
- (void)pageURLStringsPrefixedWithVariantsOfDomainString:(id)string includingPrivateData:(BOOL)data completionHandler:(id /* block */)handler;
- (void)dataCacheDidSetUp:(id)up;
- (void)sqliteStoreDidFailDatabaseIntegrityCheck:(id)check completionHandler:(id /* block */)handler;
- (void)sqliteStoreDidFallBackToInMemoryStore:(id)store;
@end

#endif /* WBSFaviconProviderPersistenceController_h */
