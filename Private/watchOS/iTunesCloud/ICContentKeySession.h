//
//   Generated by https://github.com/blacktop/ipsw (Version: 3.1.454, BuildTime: 2024-02-08T22:07:34Z)
//
//    - LC_BUILD_VERSION:  Platform: watchOSSimulator, MinOS: 10.2, SDK: 10.2, Tool: ld (902.8)
//    - LC_SOURCE_VERSION: 4023.330.5.0.0
//
#ifndef ICContentKeySession_h
#define ICContentKeySession_h
@import Foundation;

#include "AVContentKeySessionDelegate-Protocol.h"
#include "ICContentKeySessionDelegateProtocol-Protocol.h"
#include "ICContentKeySessionPrefetchKeyConfiguration.h"
#include "ICContentKeyStoreProtocol-Protocol.h"
#include "ICFileContentKeyStore.h"
#include "ICStoreRequestContext.h"

@class AVContentKeySession, NSMutableArray, NSMutableDictionary, NSMutableSet, NSNumber, NSString, NSURL;
@protocol OS_dispatch_queue, OS_dispatch_semaphore, OS_dispatch_source;

@interface ICContentKeySession : NSObject<AVContentKeySessionDelegate> {
  /* instance variables */
  AVContentKeySession *_contentKeySession;
  NSObject<OS_dispatch_queue> *_accessQueue;
  NSMutableSet *_pendingKeyIdentifiers;
  NSMutableSet *_pendingRenewalKeyIdentifiers;
  NSMutableArray *_renewalCompletionBlocks;
  NSObject<OS_dispatch_semaphore> *_waitForKeysSemaphore;
  ICContentKeySessionPrefetchKeyConfiguration *_prefetchKeyConfiguration;
  ICFileContentKeyStore *_prefetchedContentKeyStore;
  NSMutableDictionary *_keyRenewalDates;
  NSMutableDictionary *_completedKeyRequests;
  NSMutableDictionary *_keyResponses;
  NSObject<OS_dispatch_source> *_keyRenewalTimer;
  BOOL _automaticKeyRenewalPaused;
  BOOL _active;
  NSObject<ICContentKeySessionDelegateProtocol> *_delegate;
}

@property (readonly, nonatomic) ICStoreRequestContext *requestContext;
@property (copy, nonatomic) NSURL *keyServerURL;
@property (copy, nonatomic) NSURL *keyCertificateURL;
@property (copy, nonatomic) NSNumber *adamID;
@property (copy, nonatomic) NSString *playbackToken;
@property (nonatomic) BOOL bypassCache;
@property (nonatomic) BOOL requestOfflineKeys;
@property (nonatomic) BOOL allowFallbackToStreamingKeys;
@property (nonatomic) BOOL isStoreKeyServer;
@property (nonatomic) long long keyServerProtocolType;
@property (readonly, nonatomic) NSObject<ICContentKeyStoreProtocol> *keyStore;
@property (copy, nonatomic) NSURL *streamingleaseStopURL;
@property (copy, nonatomic) NSURL *offlineLeaseStartURL;
@property (copy, nonatomic) NSURL *offlineLeaseStopNonceURL;
@property (copy, nonatomic) NSURL *offlineLeaseStopURL;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;

/* class methods */
+ (id)enhancedAudioSharedContentKeyPath;
+ (id)pendingInvalidationKeyStorePath;
+ (id)copyKeysToPendingInvalidationStoreFromPath:(id)path;

/* instance methods */
- (id)init;
- (id)initWithRequestContext:(id)context;
- (id)initWithRequestContext:(id)context keyStore:(id)store;
- (id)initWithRequestContext:(id)context keyStore:(id)store delegate:(id)delegate;
- (void)dealloc;
- (void)addAsset:(id)asset;
- (void)addAsset:(id)asset shouldPreloadKeys:(BOOL)keys waitForKeyIdentifiers:(BOOL)identifiers;
- (void)removeAsset:(id)asset;
- (void)processKeyWithIdentifier:(id)identifier;
- (void)pauseAutomaticKeyRenewal;
- (void)resumeAutomaticKeyRenewal;
- (void)stopSessionInvalidatingKeys:(BOOL)keys withCompletion:(id /* block */)completion;
- (void)invalidateKeyWithIdentifier:(id)identifier withCompletion:(id /* block */)completion;
- (void)waitForKeyRenewalsWithCompletionHandler:(id /* block */)handler;
- (void)waitForAllKeysToProcess;
- (void)waitForAllKeysToProcessWithTimeout:(double)timeout;
- (void)contentKeySession:(id)session didProvideContentKeyRequest:(id)request;
- (void)contentKeySession:(id)session didProvidePersistableContentKeyRequest:(id)request;
- (void)contentKeySession:(id)session didProvideRenewingContentKeyRequest:(id)request;
- (void)contentKeySession:(id)session contentKeyRequestDidSucceed:(id)succeed;
- (void)contentKeySession:(id)session contentKeyRequest:(id)request didFailWithError:(id)error;
- (BOOL)_isPrefetchKey:(id)key;
- (void)_performKeyDeliveryRequestForContentKeyRequest:(id)request persistResponse:(BOOL)response isRenewal:(BOOL)renewal;
- (void)_scheduleKeyRefreshTimer;
- (void)_renewExpiredKeys;
- (void)_processKeyWithIdentifier:(id)identifier;
- (void)_finishProcessingKeyWithIdentifier:(id)identifier;
- (void)_invalidateKeyWithIdentifier:(id)identifier forAdamID:(id)id offline:(BOOL)offline usingAccountDSID:(id)dsid keyData:(id)data withCompletion:(id /* block */)completion;
@end

#endif /* ICContentKeySession_h */
