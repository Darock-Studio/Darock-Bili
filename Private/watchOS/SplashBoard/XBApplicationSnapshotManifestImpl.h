//
//   Generated by https://github.com/blacktop/ipsw (Version: 3.1.454, BuildTime: 2024-02-08T22:07:34Z)
//
//    - LC_BUILD_VERSION:  Platform: watchOSSimulator, MinOS: 10.2, SDK: 10.2, Tool: ld (902.8)
//    - LC_SOURCE_VERSION: 297.1.0.0.0
//
#ifndef XBApplicationSnapshotManifestImpl_h
#define XBApplicationSnapshotManifestImpl_h
@import Foundation;

#include "XBApplicationSnapshotManifest.h"
#include "BSDescriptionProviding-Protocol.h"
#include "NSSecureCoding-Protocol.h"
#include "XBSnapshotContainerIdentity.h"
#include "XBSnapshotManifestIdentity.h"

@class BSAtomicSignal, BSContinuousMachTimer, NSFileManager, NSMutableArray, NSMutableDictionary, NSString;

@interface XBApplicationSnapshotManifestImpl : XBApplicationSnapshotManifest<NSSecureCoding, BSDescriptionProviding> {
  /* instance variables */
  NSMutableDictionary *_snapshotGroupsByID;
  NSFileManager *_imageAccessFileManger;
  BSContinuousMachTimer *_reapingTimer;
  BSAtomicSignal *_invalidatedSignal;
  unsigned long long _clientCount;
  unsigned long long _pendingOperations;
  NSMutableArray *_archiveSchedulingQueue_synchronizeCompletions;
  BOOL _archiveSchedulingQueue_dirty;
  BOOL _archiveSchedulingQueue_scheduled;
  BOOL _logContainerIdentifierDirty;
  struct os_unfair_lock_s { unsigned int _os_unfair_lock_opaque; } _accessLock;
  NSString *_baseLogIdentifier;
  NSString *_logIdentifier;
}

@property (readonly, copy, nonatomic) XBSnapshotContainerIdentity *containerIdentity;
@property (readonly, copy, nonatomic) XBSnapshotManifestIdentity *identity;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;

/* class methods */
+ (void)initialize;
+ (id)acquireManifestForContainerIdentity:(id)identity store:(id)store creatingIfNecessary:(BOOL)necessary;
+ (void)relinquishManifest:(id)manifest;
+ (void)_workloop_noteManifestInvalidated:(id)invalidated;
+ (BOOL)isUnderMemoryPressure;
+ (id)_snapshotPredicateForRequest:(id)request;
+ (void)_configureSnapshot:(id)snapshot withCompatibilityInfo:(id)info forLaunchRequest:(id)request;
+ (long long)_outputFormatForSnapshot:(id)snapshot;
+ (BOOL)supportsSecureCoding;

/* instance methods */
- (void)_setContainerIdentity:(id)identity;
- (void)_commonInit;
- (id)init;
- (id)_initWithContainerIdentity:(id)identity;
- (void)dealloc;
- (void)beginTrackingImageDeletions;
- (void)endTrackingImageDeletions;
- (id)bundleIdentifier;
- (id)containerPath;
- (id)defaultGroupIdentifier;
- (id)snapshotsForGroupID:(id)id;
- (id)snapshotsForGroupID:(id)id matchingPredicate:(id)predicate;
- (id)snapshotsForGroupID:(id)id fetchRequest:(id)request;
- (id)snapshotsForGroupIDs:(id)ids;
- (id)snapshotsForGroupIDs:(id)ids matchingPredicate:(id)predicate;
- (id)snapshotsForGroupIDs:(id)ids fetchRequest:(id)request;
- (id)createSnapshotWithGroupID:(id)id;
- (id)createVariantForSnapshot:(id)snapshot withIdentifier:(id)identifier;
- (void)_didGenerateImage:(BOOL)image imageGenerationSignal:(id)signal logIdentifier:(id)identifier imageGeneratedHandler:(id /* block */)handler qos:(unsigned int)qos;
- (void)_didGenerateImageData:(id)data forSnapshot:(id)snapshot imageWasGenerated:(BOOL)generated imageDataGenerationSignal:(id)signal logIdentifier:(id)identifier didSaveHandler:(id /* block */)handler qos:(unsigned int)qos writeToFileIfSupported:(BOOL)supported;
- (void)generateImageForSnapshot:(id)snapshot dataProvider:(id)provider options:(unsigned long long)options imageGeneratedHandler:(id /* block */)handler imageDataSavedHandler:(id /* block */)handler;
- (void)saveSnapshot:(id)snapshot atPath:(id)path withContext:(id)context;
- (void)deleteSnapshot:(id)snapshot;
- (void)deleteSnapshots:(id)snapshots;
- (void)deleteSnapshotsMatchingPredicate:(id)predicate;
- (void)deleteSnapshotsUsingPredicateBuilder:(id /* block */)builder;
- (void)deleteSnapshotsForGroupID:(id)id predicateBuilder:(id /* block */)builder;
- (void)deleteSnapshotsForGroupID:(id)id matchingPredicate:(id)predicate;
- (void)deleteSnapshotsForGroupID:(id)id;
- (void)purgeSnapshotsWithProtectedContent;
- (void)updateSnapshotsAPFSPurgability:(BOOL)apfspurgability;
- (BOOL)snapshotsConsideredUnpurgableByAPFS;
- (void)deleteAllSnapshots;
- (void)beginSnapshotAccessTransaction:(id /* block */)transaction completion:(id /* block */)completion;
- (id)_snapshotGroupsByID;
- (BOOL)_invalidate;
- (id)_generatableSnapshotForGroupID:(id)id generationContext:(id)context;
- (id)_createSnapshotWithGroupID:(id)id generationContext:(id)context;
- (void)_addSnapshotToGroup:(id)group;
- (void)_access_addSnapshotToGroup:(id)group;
- (id)_allSnapshotGroups;
- (id)_access_allSnapshotGroups;
- (void)_noteDirtied;
- (void)_synchronizeDataStoreWithCompletion:(id /* block */)completion;
- (void)archive;
- (void)_scheduleArchivingIfNecessaryWithCompletion:(id /* block */)completion;
- (void)_scheduleArchivingIfNecessaryWithDelay:(double)delay completion:(id /* block */)completion;
- (void)_handleMemoryPressure;
- (void)_access_doArchiveWithCompletions:(id)completions;
- (BOOL)_validateWithContainerIdentity:(id)identity;
- (BOOL)_access_validateWithContainerIdentity:(id)identity;
- (void)_reapExpiredAndInvalidSnapshots;
- (void)_access_workloop_reapExpiredAndInvalidSnapshots;
- (void)_access_accessSnapshotsWithBlock:(id /* block */)block completion:(id /* block */)completion;
- (void)_access_deletePaths:(id)paths;
- (void)_access_deleteSnapshots:(id)snapshots;
- (void)_access_purgeSnapshotsWithProtectedContent;
- (void)_access_updateSnapshotsAPFSPurgability:(BOOL)apfspurgability;
- (BOOL)_access_snapshotsConsideredUnpurgableByAPFS;
- (void)_access_gatherPaths:(id)paths forSnapshot:(id)snapshot;
- (id)_access_snapshotsForGroupIDs:(id)ids;
- (id)_access_snapshotsForGroupIDs:(id)ids matchingPredicate:(id)predicate;
- (id)_access_snapshotsMatchingPredicate:(id)predicate;
- (id)_access_snapshotGroupForID:(id)id creatingIfNeeded:(BOOL)needed;
- (BOOL)_imageAccessQueue_saveData:(id)data forSnapshot:(id)snapshot;
- (void)_workloop_incrementClientCount;
- (void)_workloop_decrementClientCount;
- (void)_workloop_checkClientCount;
- (void)_workloop_reallyCheckClientCount;
- (void)encodeWithCoder:(id)coder;
- (id)initWithCoder:(id)coder;
- (id)_descriptionForStateCaptureWithMultilinePrefix:(id)prefix;
- (id)succinctDescription;
- (id)succinctDescriptionBuilder;
- (id)descriptionWithMultilinePrefix:(id)prefix;
- (id)descriptionBuilderWithMultilinePrefix:(id)prefix;
@end

#endif /* XBApplicationSnapshotManifestImpl_h */
