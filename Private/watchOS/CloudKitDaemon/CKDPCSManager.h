//
//   Generated by https://github.com/blacktop/ipsw (Version: 3.1.454, BuildTime: 2024-02-08T22:07:34Z)
//
//    - LC_BUILD_VERSION:  Platform: watchOSSimulator, MinOS: 10.2, SDK: 10.2, Tool: ld (902.8)
//    - LC_SOURCE_VERSION: 2130.14.1.0.0
//
#ifndef CKDPCSManager_h
#define CKDPCSManager_h
@import Foundation;

#include "CKDAccount.h"
#include "CKDContainerScopedUserIDProvider-Protocol.h"
#include "CKDLogicalDeviceContext.h"
#include "CKDPCSIdentityManager.h"
#include "CKDPCSTestOverrideProvider-Protocol.h"
#include "CKDProtocolTranslatorIdentityDelegate-Protocol.h"

@class BOOL *, CKContainerID, NSData, NSDate, NSMutableDictionary, NSMutableSet, NSString;
@protocol OS_dispatch_queue, OS_dispatch_source;

@interface CKDPCSManager : NSObject<CKDPCSTestOverrideProvider, CKDProtocolTranslatorIdentityDelegate>

@property (retain) CKDAccount *account;
@property (readonly, weak, nonatomic) NSObject<CKDContainerScopedUserIDProvider> *containerScopedUserIDProvider;
@property (readonly, nonatomic) CKContainerID *containerID;
@property (readonly, nonatomic) NSString *responsibleBundleID;
@property (readonly, nonatomic) BOOL forceEnableReadOnlyManatee;
@property (readonly, nonatomic) unsigned long long mmcsEncryptionSupport;
@property (readonly, nonatomic) BOOL useZoneWidePCS;
@property (readonly, nonatomic) CKDPCSIdentityManager *identityManager;
@property (retain, nonatomic) NSDate *lastMissingManateeIdentityErrorDateForCurrentService;
@property (retain, nonatomic) NSMutableSet *missingIdentityPublicKeys;
@property (retain, nonatomic) NSMutableSet *servicesWithMissingIdentities;
@property (retain, nonatomic) NSMutableSet *undecryptablePCSDataHashes;
@property (retain, nonatomic) NSData *boundaryKeyData;
@property (retain, nonatomic) NSObject<OS_dispatch_source> *pcsUpdateSource;
@property (retain, nonatomic) NSObject<OS_dispatch_queue> *synchronizeQueue;
@property (retain, nonatomic) NSObject<OS_dispatch_queue> *callbackQueue;
@property (retain, nonatomic) NSMutableDictionary *pcsTestOverrides;
@property (readonly, nonatomic) CKDLogicalDeviceContext *deviceContext;
@property (readonly, nonatomic) NSString *pcsServiceName;
@property (readonly, nonatomic) BOOL currentServiceIsManatee;
@property (readonly, nonatomic) unsigned long long serviceTypeForSharing;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;

/* class methods */
+ (id)_legacyServiceNameForContainerID:(id)id;
+ (id)noMatchingIdentityErrorForPCSError:(struct __CFError *)pcserror withErrorCode:(long long)code description:(id)description;
+ (id)publicKeyIDFromIdentity:(struct _OpaquePCSShareProtection *)identity;
+ (id)protectionIdentifierFromShareProtection:(struct _OpaquePCSShareProtection *)protection;
+ (id)allProtectionIdentifiersFromShareProtection:(struct _OpaquePCSShareProtection *)protection;
+ (id)pcsOverrideKeys;

/* instance methods */
- (void)updateAccount:(id)account clearPCSCacheHandler:(id /* block */)handler;
- (id)initWithContainer:(id)container;
- (void)dealloc;
- (BOOL)_isAllowlistedKeyRollingContainerID:(id)id;
- (id)_pcsObjectKindForCKDPCSBlobType:(unsigned long long)type;
- (struct _PCSIdentityData *)debugSharingIdentity;
- (unsigned long long)publicKeyVersionForServiceType:(unsigned long long)type;
- (void)setPCSServiceNameOverwrite:(id)overwrite;
- (id)copyPublicKeyForService:(unsigned long long)service withError:(id *)error;
- (id)copyAllPublicKeysForService:(unsigned long long)service withError:(id *)error;
- (struct _PCSPublicIdentityData *)copyDiversifiedIdentityForService:(unsigned long long)service withError:(id *)error;
- (id)copyDiversifiedPublicKeyForService:(unsigned long long)service withError:(id *)error;
- (id)participantPublicKeyForServiceType:(unsigned long long)type error:(id *)error;
- (struct _PCSIdentityData *)createRandomSharingIdentityWithError:(id *)error;
- (struct _PCSIdentityData *)createCombinedIdentityWithOutOfNetworkPrivateKey:(id)key publicSharingIdentity:(id)identity;
- (id)createProtectionInfoFromOONPrivateKey:(id)key privateToken:(id)token OONProtectionInfo:(id)info error:(id *)error;
- (BOOL)canDecryptInvitedProtectionData:(id)data participantProtectionInfo:(id)info serviceType:(unsigned long long)type error:(id *)error;
- (id)dataFromSharingIdentity:(struct _PCSIdentityData *)identity error:(id *)error;
- (struct _PCSIdentityData *)createSharingIdentityFromData:(id)data error:(id *)error;
- (struct _PCSPublicIdentityData *)createPublicSharingIdentityFromPublicKey:(id)key error:(id *)error;
- (id)_addIdentity:(struct _PCSIdentitySetData *)identity withService:(unsigned long long)service toPCS:(struct _OpaquePCSShareProtection *)pcs;
- (id)addIdentityForService:(unsigned long long)service toPCS:(struct _OpaquePCSShareProtection *)pcs;
- (BOOL)sharingFingerprintsContainPublicKeyWithData:(id)data error:(id *)error;
- (void)_locked_markMissingIdentitiesFromFailedDecryptError:(struct __CFError *)error serviceName:(id)name;
- (void)_locked_createZonePCSWithSyncKeyRegistryRetry:(BOOL)retry requestorOperationID:(id)id keySyncAnalytics:(id)analytics completionHandler:(id /* block */)handler;
- (void)createZonePCSWithSyncKeyRegistryRetry:(BOOL)retry requestorOperationID:(id)id completionHandler:(id /* block */)handler;
- (void)createZonePCSWithRequestorOperationID:(id)id completionHandler:(id /* block */)handler;
- (struct _OpaquePCSShareProtection *)createZonePCSWithError:(id *)error;
- (id)dataFromZonePCS:(struct _OpaquePCSShareProtection *)pcs error:(id *)error;
- (id)getAllPublicKeysForExportedData:(id)data error:(id *)error;
- (BOOL)findSelfParticipantOnShareMetadata:(id)metadata invitationToken:(id)token;
- (id)getCurrentIdentityExportedPrivateKey;
- (id)generateOctopusAnonymousUserID;
- (id)generateAnonymousCKUserIDForCurrentUserInShare:(id)share containerID:(id)id acceptA2AShareUsingVersionOneAnonymousIdentifier:(BOOL)identifier;
- (id)createSignatureWithIdentity:(struct _PCSIdentityData *)identity dataToBeSigned:(id)signed error:(id *)error;
- (void)_locked_createPCSFromData:(id)data ofType:(unsigned long long)type usingPCSServiceType:(unsigned long long)type tryDecryptingWithOtherServices:(BOOL)services withSyncKeyRegistryRetry:(BOOL)retry lastModifiedDate:(id)date keySyncAnalytics:(id)analytics requestorOperationID:(id)id completionHandler:(id /* block */)handler;
- (BOOL)_checkUnitTestOverridesForDecryptionFailuresWithState:(BOOL)state shouldRetry:(BOOL *)retry error:(id *)error;
- (void)_createPCSFromData:(id)data ofType:(unsigned long long)type usingPCSServiceType:(unsigned long long)type tryDecryptingWithOtherServices:(BOOL)services withSyncKeyRegistryRetry:(BOOL)retry lastModifiedDate:(id)date requestorOperationID:(id)id completionHandler:(id /* block */)handler;
- (void)createZonePCSFromData:(id)data usingServiceIdentityWithType:(unsigned long long)type zonePCSModificationDate:(id)date requestorOperationID:(id)id completionHandler:(id /* block */)handler;
- (void)createIngestedPPPCSDataFromInvitationData:(id)data shareModificationDate:(id)date requestorOperationID:(id)id completionHandler:(id /* block */)handler;
- (BOOL)availableIdentityForService:(unsigned long long)service error:(id *)error;
- (void)_locked_checkIdentitiesForService:(unsigned long long)service withSyncKeyRegistryRetry:(BOOL)retry keySyncAnalytics:(id)analytics requestorOperationID:(id)id completionHandler:(id /* block */)handler;
- (void)checkIdentitiesForService:(unsigned long long)service withSyncKeyRegistryRetry:(BOOL)retry requestorOperationID:(id)id completionHandler:(id /* block */)handler;
- (struct _OpaquePCSShareProtection *)createZonePCSFromData:(id)data usingServiceIdentityWithType:(unsigned long long)type error:(id *)error;
- (BOOL)decryptSharedZonePCSData:(id)pcsdata withInvitedPCS:(struct _OpaquePCSShareProtection *)pcs error:(id *)error;
- (id)etagFromZonePCS:(struct _OpaquePCSShareProtection *)pcs error:(id *)error;
- (id)repairZonePCSData:(id)pcsdata error:(id *)error;
- (BOOL)zonePCSNeedsKeyRolled:(struct _OpaquePCSShareProtection *)rolled;
- (BOOL)zonePCSNeedsKeyRolled:(struct _OpaquePCSShareProtection *)rolled isZoneishZone:(BOOL)zone bypassAllowlistedContainers:(BOOL)containers;
- (BOOL)zonePCSNeedsUpdate:(struct _OpaquePCSShareProtection *)update;
- (BOOL)isRemindersZoneThatNeedsUpdate:(struct _OpaquePCSShareProtection *)update;
- (id)updateServiceIdentityOnZonePCS:(struct _OpaquePCSShareProtection *)pcs;
- (id)rollMasterKeyForRecordPCS:(struct _OpaquePCSShareProtection *)pcs forOperation:(id)operation;
- (id)rollMasterKeyForRecordPCS:(struct _OpaquePCSShareProtection *)pcs isZoneishRecord:(BOOL)record bypassAllowlistedContainers:(BOOL)containers forOperation:(id)operation;
- (id)updateZoneIdentityForRecordPCS:(struct _OpaquePCSShareProtection *)pcs usingZonePCS:(struct _OpaquePCSShareProtection *)pcs isZoneishRecord:(BOOL)record bypassAllowlistedContainers:(BOOL)containers;
- (BOOL)isPreviouslyUndecryptablePCS:(id)pcs;
- (void)markUndecryptablePCS:(id)pcs;
- (id)removePrivateKeysForKeyIDs:(id)ids fromPCS:(struct _OpaquePCSShareProtection *)pcs;
- (long long)keyrollingErrorCodeForPCSOfType:(unsigned long long)type;
- (id)rollIdentityForSharePCS:(struct _OpaquePCSShareProtection *)pcs ofType:(unsigned long long)type removeAllExistingPrivateKeys:(BOOL)keys error:(id *)error;
- (id)updateIdentityAndRollKeyForZonePCS:(struct _OpaquePCSShareProtection *)pcs usingServiceIdentityWithType:(unsigned long long)type forOperation:(id)operation;
- (BOOL)canRollShareKeys;
- (id)keyRollForZoneWideShareWithZonePCS:(id)pcs sharePCS:(id)pcs forOperation:(id)operation;
- (id)keyRollIfNeededForPerRecordPCS:(id)pcs forOperation:(id)operation didRoll:(BOOL *)roll;
- (id)keyRollForZoneWideShareRecordPCS:(id)pcs sharedZonePCS:(id)pcs sharePCS:(id)pcs forOperation:(id)operation;
- (struct _OpaquePCSShareProtection *)createRecordPCSWithZonePCS:(struct _OpaquePCSShareProtection *)pcs sharePCS:(struct _OpaquePCSShareProtection *)pcs createLite:(BOOL)lite error:(id *)error;
- (struct _OpaquePCSShareProtection *)createRecordPCSWithEncryptedZonePCS:(struct __CFData *)pcs sharePCS:(struct _OpaquePCSShareProtection *)pcs createLite:(BOOL)lite error:(id *)error;
- (id)dataFromRecordPCS:(struct _OpaquePCSShareProtection *)pcs error:(id *)error;
- (struct _OpaquePCSShareProtection *)createPCSObjectFromData:(id)data ofType:(unsigned long long)type sharedToPCS:(struct _OpaquePCSShareProtection *)pcs logFailure:(BOOL)failure error:(id *)error;
- (struct _OpaquePCSShareProtection *)createPCSObjectFromData:(id)data ofType:(unsigned long long)type sharedToPCS:(struct _OpaquePCSShareProtection *)pcs error:(id *)error;
- (BOOL)addSharePCS:(struct _OpaquePCSShareProtection *)pcs toRecordPCS:(struct _OpaquePCSShareProtection *)pcs permission:(unsigned long long)permission error:(id *)error;
- (BOOL)addSharePCS:(struct _OpaquePCSShareProtection *)pcs toRecordPCS:(struct _OpaquePCSShareProtection *)pcs error:(id *)error;
- (BOOL)updateSigningIdentityOnPCS:(struct _OpaquePCSShareProtection *)pcs usingSignedPCS:(struct _OpaquePCSShareProtection *)pcs;
- (BOOL)removeSharePCS:(struct _OpaquePCSShareProtection *)pcs fromRecordPCS:(struct _OpaquePCSShareProtection *)pcs error:(id *)error;
- (id)etagFromRecordPCS:(struct _OpaquePCSShareProtection *)pcs error:(id *)error;
- (struct _OpaquePCSShareProtection *)createEmptySignedSharePCSOfType:(unsigned long long)type forPCSServiceType:(unsigned long long)type withError:(id *)error;
- (struct _OpaquePCSShareProtection *)createEmptySharePCSOfType:(unsigned long long)type error:(id *)error;
- (void)setOwnerIdentity:(struct _PCSPublicIdentityData *)identity onPCS:(struct _OpaquePCSShareProtection *)pcs;
- (BOOL)_addPublicIdentityForService:(unsigned long long)service toSharePCS:(struct _OpaquePCSShareProtection *)pcs withError:(id *)error;
- (struct _OpaquePCSShareProtection *)createSharePCSOfType:(unsigned long long)type forPCSServiceType:(unsigned long long)type error:(id *)error;
- (struct _OpaquePCSShareProtection *)createSharePublicPCSWithIdentity:(struct _PCSIdentityData *)identity error:(id *)error;
- (struct _OpaquePCSShareProtection *)createChainPCSWithError:(id *)error;
- (id)dataFromSharePCS:(struct _OpaquePCSShareProtection *)pcs error:(id *)error;
- (struct _OpaquePCSShareProtection *)createSharePCSFromData:(id)data sharingIdentity:(struct _PCSIdentityData *)identity logFailure:(BOOL)failure error:(id *)error;
- (struct _OpaquePCSShareProtection *)createSharePCSFromData:(id)data sharingIdentity:(struct _PCSIdentityData *)identity error:(id *)error;
- (struct _OpaquePCSShareProtection *)createSharePCSFromData:(id)data ofType:(unsigned long long)type withService:(unsigned long long)service logFailure:(BOOL)failure error:(id *)error;
- (struct _OpaquePCSShareProtection *)createSharePCSFromData:(id)data ofType:(unsigned long long)type withService:(unsigned long long)service error:(id *)error;
- (struct _OpaquePCSShareProtection *)createSharePCSFromData:(id)data sharePrivateKey:(id)key error:(id *)error;
- (struct _OpaquePCSShareProtection *)createSharePCSFromEncryptedData:(id)data error:(id *)error;
- (id)publicKeyDataFromPCS:(struct _OpaquePCSShareProtection *)pcs error:(id *)error;
- (void)decryptPCSDataOnSharePCS:(id)pcs shareModificationDate:(id)date requestorOperationID:(id)id completionHandler:(id /* block */)handler;
- (void)_locked_decryptCurrentPerParticipantPCSDataOnSharePCS:(id)pcs shareModificationDate:(id)date requestorOperationID:(id)id completionHandler:(id /* block */)handler;
- (void)_locked_decryptPCSDataOnSharePCS:(id)pcs shareModificationDate:(id)date withPublicSharingKey:(id)key requestorOperationID:(id)id completionHandler:(id /* block */)handler;
- (void)pcsDataFromFetchedShare:(id)share requestorOperationID:(id)id completionHandler:(id /* block */)handler;
- (void)pcsDataFromFetchedShare:(id)share withServiceType:(unsigned long long)type requestorOperationID:(id)id completionHandler:(id /* block */)handler;
- (void)pcsDataFromFetchedShare:(id)share withPublicSharingKey:(id)key withServiceType:(unsigned long long)type requestorOperationID:(id)id completionHandler:(id /* block */)handler;
- (void)_locked_pcsDataFromFetchedShare:(id)share withPublicSharingKey:(id)key withServiceType:(unsigned long long)type requestorOperationID:(id)id completionHandler:(id /* block */)handler;
- (struct _PCSPublicIdentityData *)copyPublicAuthorshipIdentityFromPCS:(struct _OpaquePCSShareProtection *)pcs;
- (id)createNewSharePCSDataForShareWithID:(id)id withPublicSharingKey:(id)key addDebugIdentity:(BOOL)identity error:(id *)error;
- (id)etagFromSharePCS:(struct _OpaquePCSShareProtection *)pcs error:(id *)error;
- (id)addPublicIdentity:(struct _PCSPublicIdentityData *)identity toSharePCS:(struct _OpaquePCSShareProtection *)pcs permission:(unsigned int)permission;
- (id)addIdentityBackToPCS:(struct _OpaquePCSShareProtection *)pcs;
- (id)addSharingIdentity:(struct _PCSIdentityData *)identity toSharePCS:(struct _OpaquePCSShareProtection *)pcs permission:(unsigned long long)permission;
- (id)removePublicIdentity:(struct _PCSPublicIdentityData *)identity fromSharePCS:(struct _OpaquePCSShareProtection *)pcs;
- (id)removeSharingIdentity:(struct _PCSIdentityData *)identity fromSharePCS:(struct _OpaquePCSShareProtection *)pcs;
- (id)removeEncryptedPCS:(id)pcs fromSharePCS:(struct _OpaquePCSShareProtection *)pcs;
- (BOOL)removePublicKeys:(id)keys fromPCS:(struct _OpaquePCSShareProtection *)pcs;
- (id)removePublicKeyID:(id)id fromPCS:(struct _OpaquePCSShareProtection *)pcs;
- (id)sharingIdentityDataFromPCS:(struct _OpaquePCSShareProtection *)pcs error:(id *)error;
- (id)decryptChainPCSForRecordPCS:(id)pcs;
- (BOOL)containerSupportsEnhancedContext;
- (id)unwrapAssetKey:(id)key withRecordPCS:(struct _OpaquePCSShareProtection *)pcs inContext:(id)context withError:(id *)error;
- (id)wrapAssetKey:(id)key withRecordPCS:(struct _OpaquePCSShareProtection *)pcs inContext:(id)context withError:(id *)error;
- (id)newAssetKeyWithType:(unsigned long long)type withError:(id *)error;
- (id)referenceIdentifierStringFromAssetKey:(id)key;
- (id)referenceSignatureFromAssetKey:(id)key;
- (id)unwrapEncryptedData:(id)data withPCS:(struct _OpaquePCSShareProtection *)pcs inContext:(id)context;
- (id)_unwrapEncryptedData:(id)data usingKeyID:(id)id forPCS:(struct _OpaquePCSShareProtection *)pcs withContextString:(id)string;
- (id)unwrapEncryptedData:(id)data withPCS:(struct _OpaquePCSShareProtection *)pcs withContextString:(id)string;
- (id)wrapEncryptedData:(id)data withPCS:(struct _OpaquePCSShareProtection *)pcs inContext:(id)context;
- (id)wrapEncryptedData:(id)data withPCS:(struct _OpaquePCSShareProtection *)pcs withContextString:(id)string;
- (void)_lockedBoundaryKeyDataWithCompletionHandler:(id /* block */)handler;
- (void)boundaryKeyDataWithCompletionHandler:(id /* block */)handler;
- (BOOL)serviceTypeIsManatee:(unsigned long long)manatee;
- (void)synchronizeUserKeyRegistryForServiceType:(unsigned long long)type shouldThrottle:(BOOL)throttle context:(id)context requestorOperationID:(id)id completionHandler:(id /* block */)handler;
- (void)sendCoreAnalyticsEventForKeySync:(id)sync;
- (void)_onSynchronizeQueue:(id /* block */)queue;
- (struct _OpaquePCSShareProtection *)_copyShareProtectionFromExportedData:(id)data ofType:(unsigned long long)type identities:(struct _PCSIdentitySetData *)identities error:(struct __CFError * *)error;
- (id)etagFromPCSData:(id)pcsdata;
- (BOOL)_isKeyRollingUnitTestContainerID:(id)id;
- (void)addEntriesForUnitTestOverrides:(id)overrides;
- (BOOL)_checkAndClearPCSTestOverrideForKey:(id)key;
- (BOOL)_checkPCSTestOverrideForKey:(id)key;
- (id)_pcsTestOverrideForKey:(id)key;
@end

#endif /* CKDPCSManager_h */
