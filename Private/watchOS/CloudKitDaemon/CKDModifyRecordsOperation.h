//
//   Generated by https://github.com/blacktop/ipsw (Version: 3.1.454, BuildTime: 2024-02-08T22:07:34Z)
//
//    - LC_BUILD_VERSION:  Platform: watchOSSimulator, MinOS: 10.2, SDK: 10.2, Tool: ld (902.8)
//    - LC_SOURCE_VERSION: 2130.14.1.0.0
//
#ifndef CKDModifyRecordsOperation_h
#define CKDModifyRecordsOperation_h
@import Foundation;

#include "CKDDatabaseOperation.h"
#include "CKDDecryptRecordsOperation.h"
#include "CKDProtocolTranslator.h"

@class C2RequestOptions, NSArray, NSData, NSDictionary, NSMapTable, NSMutableDictionary;
@protocol CKModifyRecordsOperationCallbacks, OS_dispatch_queue;

@interface CKDModifyRecordsOperation : CKDDatabaseOperation {
  /* instance variables */
  CKDDecryptRecordsOperation *_decryptOperation;
  BOOL _hasRecordsToSave;
  BOOL _hasRecordsToDelete;
}

@property (@dynamic, nonatomic) unsigned long long state;
@property (retain, nonatomic) NSArray *recordsToSave;
@property (retain, nonatomic) NSArray *recordIDsToDelete;
@property (retain, nonatomic) NSDictionary *recordIDsToDeleteToEtags;
@property (retain, nonatomic) NSDictionary *recordIDsToDeleteToSigningPCSIdentity;
@property (retain, nonatomic) NSDictionary *conflictLosersToResolveByRecordID;
@property (retain, nonatomic) NSDictionary *pluginFieldsForRecordDeletesByID;
@property (retain, nonatomic) NSDictionary *handlersByRecordID;
@property (retain, nonatomic) NSDictionary *parentsByRecordID;
@property (retain, nonatomic) NSMapTable *handlersByAssetNeedingRecordFetch;
@property (retain, nonatomic) NSMapTable *handlersByAsset;
@property (retain, nonatomic) NSMutableDictionary *modifyHandlersByZoneID;
@property (nonatomic) int saveAttempts;
@property (nonatomic) long long savePolicy;
@property (copy, nonatomic) NSData *clientChangeTokenData;
@property (nonatomic) BOOL retriedRecords;
@property (nonatomic) BOOL shouldOnlySaveAssetContent;
@property (nonatomic) BOOL haveOutstandingHandlers;
@property (nonatomic) BOOL atomic;
@property (retain, nonatomic) CKDProtocolTranslator *translator;
@property (nonatomic) BOOL shouldReportRecordsInFlight;
@property (retain, nonatomic) NSObject<OS_dispatch_queue> *modifyRecordsQueue;
@property (readonly, nonatomic) CKDDecryptRecordsOperation *recordDecryptOperation;
@property (copy, nonatomic) NSData *cachedUserBoundaryKeyData;
@property (retain, nonatomic) NSDictionary *assetUUIDToExpectedProperties;
@property (retain, nonatomic) NSDictionary *packageUUIDToExpectedProperties;
@property (nonatomic) BOOL originatingFromDaemon;
@property (nonatomic) BOOL markAsParticipantNeedsNewInvitationToken;
@property (nonatomic) BOOL requestNeedsUserPublicKeys;
@property (retain, nonatomic) NSArray *userPublicKeys;
@property (copy, nonatomic) C2RequestOptions *streamingAssetRequestOptions;
@property (nonatomic) BOOL shouldModifyRecordsInDatabase;
@property (nonatomic) BOOL includeMergeableDeltasInModifyRecordsRequest;
@property (nonatomic) BOOL shouldCloneFileInAssetCache;
@property (retain, @dynamic, nonatomic) NSObject<CKModifyRecordsOperationCallbacks> *clientOperationCallbackProxy;
@property (nonatomic) BOOL retryPCSFailures;
@property (nonatomic) BOOL canSetPreviousProtectionEtag;
@property (nonatomic) BOOL trustProtectionData;
@property (nonatomic) BOOL alwaysFetchPCSFromServer;
@property (copy, nonatomic) id /* block */ saveProgressBlock;
@property (copy, nonatomic) id /* block */ saveCompletionBlock;
@property (copy, nonatomic) id /* block */ deleteCompletionBlock;
@property (copy, nonatomic) id /* block */ uploadCompletionBlock;
@property (copy, nonatomic) id /* block */ recordsInFlightBlock;

/* class methods */
+ (BOOL)_claimPackagesInRecord:(id)record error:(id *)error;
+ (id)nameForState:(unsigned long long)state;
+ (long long)isPredominatelyDownload;

/* instance methods */
- (id)initWithOperationInfo:(id)info container:(id)container;
- (id)activityCreate;
- (BOOL)_hasHandlerInState:(unsigned long long)state;
- (void)_enumerateHandlersInState:(unsigned long long)state withBlock:(id /* block */)block;
- (int)operationType;
- (BOOL)isOperationType:(int)type;
- (id)handlerForSaveWithRecord:(id)record;
- (id)handlerForDeleteWithRecordID:(id)id;
- (void)finishDecryption;
- (BOOL)makeStateTransition;
- (void)callbackWithMetadata:(id)metadata error:(id)error;
- (void)saveCallbackWithMetadata:(id)metadata error:(id)error;
- (void)deleteCallbackWithMetadata:(id)metadata error:(id)error;
- (void)_performCallbacksForNonAtomicZoneHandlers:(id)handlers;
- (void)_performCallbacksForAtomicZoneHandlers:(id)handlers;
- (void)_performHandlerCallbacks;
- (void)_determineEnvironment;
- (void)_fetchUserPublicKeys;
- (void)_fetchContainerScopedUserID;
- (void)_applySideEffects;
- (id)_topoSortRecordsForHandlers:(id)handlers;
- (BOOL)_shouldToposortInContainerID:(id)id;
- (BOOL)_topoSortRecords;
- (void)_fetchShareParticipants;
- (void)_prepareParentPCS;
- (void)_fetchSharePCSData;
- (BOOL)_needsSigningPCS;
- (void)_fetchRecordPCSData;
- (void)assetArray:(id)array didFetchRecord:(id)record error:(id)error;
- (void)packageArray:(id)array didFetchRecord:(id)record error:(id)error;
- (void)_didCompleteRecordFetchOperation:(id)operation assetArrayByRecordID:(id)id;
- (void)_fetchAssetRecordsForRereferencing;
- (void)_prepareForUpload;
- (id)_prepareAssetsForUpload;
- (void)_fetchUserBoundaryKey;
- (void)_uploadAssets;
- (void)_setBoundaryKeyOnAssetsToUpload:(id)upload;
- (void)_markRecordHandlersAsUploaded;
- (BOOL)_prepareRecordsForSave;
- (void)_handleDecryptionFailure:(id)failure forRecordID:(id)id;
- (void)_verifyRecordEncryption;
- (void)_handleRecordSaved:(id)saved handler:(id)handler etag:(id)etag dateStatistics:(id)statistics expirationDate:(id)date responseCode:(id)code keysAssociatedWithETag:(id)etag recordForOplockFailure:(id)failure serverRecord:(id)record;
- (void)_reallyHandleRecordSaved:(id)saved handler:(id)handler etag:(id)etag dateStatistics:(id)statistics expirationDate:(id)date responseCode:(id)code keysAssociatedWithETag:(id)etag recordForOplockFailure:(id)failure decryptedServerRecord:(id)record;
- (void)_handleRecordDeleted:(id)deleted handler:(id)handler responseCode:(id)code;
- (void)_handleMergeableDeltaSavedForRecordID:(id)id key:(id)key result:(id)result;
- (void)_handleReplaceDeltasRequest:(id)request result:(id)result;
- (id)_createModifyRequestWithRecordsToSave:(id)save recordsToDelete:(id)delete recordsToDeleteToEtags:(id)etags recordIDsToDeleteToSigningPCSIdentity:(id)pcsidentity handlersByRecordID:(id)id sendMergeableDeltas:(BOOL)deltas;
- (id)requestedFieldsByRecordIDForRecords:(id)records;
- (void)_reportRecordsInFlight;
- (void)_continueRecordsModify;
- (void)_uploadMergeableDeltas;
- (void)main;
- (void)_clearProtectionDataIfNotEntitled;
- (void)finishWithError:(id)error;
- (void)_finishOnCallbackQueueWithError:(id)error;
- (id)analyticsPayload;
- (BOOL)supportsClearAssetEncryption;
- (BOOL)validateAgainstLiveContainer:(id)container error:(id *)error;
- (id)relevantZoneIDs;
@end

#endif /* CKDModifyRecordsOperation_h */
