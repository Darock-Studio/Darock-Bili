//
//   Generated by https://github.com/blacktop/ipsw (Version: 3.1.454, BuildTime: 2024-02-08T22:07:34Z)
//
//    - LC_BUILD_VERSION:  Platform: watchOSSimulator, MinOS: 10.2, SDK: 10.2, Tool: ld (902.8)
//    - LC_SOURCE_VERSION: 186.2.2.0.0
//
#ifndef QLDiskCache_h
#define QLDiskCache_h
@import Foundation;

#include "QLCacheIndexDatabase.h"
#include "QLCacheMMAPBlobDatabase.h"
#include "QLDiskCacheDelegate-Protocol.h"

@class NSLock, NSMutableDictionary, NSString;

@interface QLDiskCache : NSObject {
  /* instance variables */
  QLCacheIndexDatabase *_indexDatabase;
  QLCacheMMAPBlobDatabase *_blobDatabase;
  NSString *_dirtyFilePath;
  NSString *_exclusivePath;
  NSString *_resetFilePath;
  NSString *_resetReasonPath;
  BOOL _dirtyForDelegate;
  NSLock *_databaseLock;
  BOOL _opened;
  int _exclusiveFD;
}

@property BOOL metaDataDirty;
@property (retain) NSMutableDictionary *metaData;
@property (retain) NSString *metaDataFilePath;
@property (readonly, nonatomic) BOOL hasDirtyLock;
@property (readonly) BOOL isOpened;
@property (readonly) NSString *path;
@property (readonly) float fragmentation;
@property (readonly) unsigned long long reserveBufferCount;
@property (readonly) unsigned long long reserveBufferSize;
@property (readonly) unsigned long long size;
@property (readonly) unsigned long long maxSize;
@property (readonly) unsigned long long maxThumbnailLifeTime;
@property (weak) NSObject<QLDiskCacheDelegate> *delegate;
@property (readonly) unsigned long long fileEntryCount;
@property (readonly) unsigned long long thumbnailCount;
@property (readonly) long long writingCount;

/* class methods */
+ (void)setCacheLocationForTesting:(id)testing;
+ (id)defaultLocation;
+ (void)setupCacheAtLocationIfNecessary:(id)necessary;

/* instance methods */
- (id)initWithPathLocation:(id)location cacheSize:(long long)size cacheThread:(id)thread;
- (void)observeValueForKeyPath:(id)path ofObject:(id)object change:(id)change context:(void *)context;
- (id)enumeratorForThumbnailRequests:(id)requests;
- (id)enumeratorForAllFilesUbiquitousFiles:(BOOL)files withExtraInfo:(BOOL)info;
- (id)enumeratorForAllThumbnailsWithFileIdentifier:(id)identifier;
- (BOOL)_setThumbnailData:(id)data;
- (void)_discardThumbnailDataForReset:(id)reset;
- (void)_cleanupDirtyLock;
- (void)_createDirtyLockInformDelegate:(BOOL)delegate;
- (void)_removeDirtyLock;
- (void)forceResetAtNextLaunch;
- (void)_cleanupForceResetAtNextLaunch;
- (void)do:(id /* block */)do;
- (BOOL)doReading:(id /* block */)reading;
- (BOOL)doWriting:(id /* block */)writing;
- (void)writeThumbnailDataBatch:(id)batch;
- (void)discardThumbnailDataBatchForReset:(id)reset;
- (unsigned long long)_deleteBlobArrayFromDatabase:(id)database;
- (unsigned long long)removeThumbnailsOlderThanDate:(id)date;
- (unsigned long long)freeDiskSpaceForNewThumbnails;
- (void)logCacheSizeBeforeCleanup;
- (unsigned long long)cleanup;
- (unsigned long long)cleanupDeletedFiles;
- (void)checkpoint;
- (void)removeFilesWithFileInfo:(id)info;
- (void)updateHitCount:(id)count forFileIdentifier:(id)identifier;
- (BOOL)_open;
- (void)_closeWhatIsOpen;
- (void)_close;
- (void)_resetWithReason:(id)reason;
- (id)_checkConsistency;
- (BOOL)open;
- (void)close;
- (void)reset;
- (id)checkConsistency;
- (id)indexDatabase;
- (id)blobDatabase;
- (id)metaDataForKey:(id)key;
- (void)setMetaData:(id)data forKey:(id)key;
- (unsigned long long)sizeSumOfThumbnailsOlderThanDate:(id)date;
- (id)reserveBufferWithLength:(unsigned long long)length;
- (id)reserveBufferForData:(id)data;
- (BOOL)validateReservedBuffer:(id)buffer;
- (BOOL)discardReservedBuffer:(id)buffer;
- (id)lastCrapWithDate:(id *)date;
- (id)lastResetWithDate:(id *)date;
- (BOOL)setLastHitDateOfAllCachedThumbnailsToDate:(id)date;
@end

#endif /* QLDiskCache_h */
