//
//   Generated by https://github.com/blacktop/ipsw (Version: 3.1.454, BuildTime: 2024-02-08T22:07:34Z)
//
//    - LC_BUILD_VERSION:  Platform: watchOSSimulator, MinOS: 10.2, SDK: 10.2, Tool: ld (902.8)
//    - LC_SOURCE_VERSION: 123.2.7.0.1
//
#ifndef BMSegmentManager_h
#define BMSegmentManager_h
@import Foundation;

#include "BMFileManagerDelegate-Protocol.h"
#include "BMFrameStore.h"
#include "BMSegmentManagerDelegate-Protocol.h"
#include "BMStoreConfig.h"
#include "BMStreamMetadata.h"

@class BMFileManager, NSOrderedSet, NSString, _PASLock;

@interface BMSegmentManager : NSObject<BMFileManagerDelegate> {
  /* instance variables */
  BMFileManager *_fileManager;
  unsigned long long _permission;
  BMStreamMetadata *_metadata;
  Class _eventDataClass;
  BMStoreConfig *_config;
  void * _deviceLockStateRegistration;
  _PASLock *_protectedState;
}

@property (readonly, nonatomic) BOOL isDataAccessible;
@property (readonly, nonatomic) NSString *path;
@property (readonly, nonatomic) BMFrameStore *currentFrameStore;
@property (readonly, nonatomic) NSOrderedSet *segmentNames;
@property (readonly, nonatomic) NSString *lastSegmentName;
@property (weak, nonatomic) NSObject<BMSegmentManagerDelegate> *delegate;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;

/* class methods */
+ (id)segmentNameFromTimestamp:(double)timestamp;
+ (double)timestampFromSegmentName:(id)name;
+ (unsigned long long)indexOfSegmentContainingEventTime:(double)time fromSegments:(id)segments;
+ (unsigned long long)sizeOfNewFrameStoreInBytesFromNonPagedSize:(unsigned long long)size isTombstoneSegment:(BOOL)segment;

/* instance methods */
- (id)initWithDirectory:(id)directory fileManager:(id)manager permission:(unsigned long long)permission config:(id)config;
- (void)dealloc;
- (void)pruneSegmentsToMaxSizeInBytes:(unsigned long long)bytes;
- (void)pruneSegmentsToMaxAge:(double)age;
- (void)refreshSegmentsList;
- (void)_updateSegments;
- (void)updateSegmentsWithGuardedDeviceLockStateData:(id)data;
- (void)openFiles:(id)files saveToOpenFiles:(id)files;
- (id)fileHandleForFile:(id)file error:(id *)error;
- (id)orderedSegmentsInDirectory:(id)directory;
- (id)lastFrameStoreOrCreateWithTimestamp:(double)timestamp;
- (id)segmentAfterFrameStore:(id)store orCreateSegmentWithTimestamp:(double)timestamp;
- (id)segmentAfterFrameStore:(id)store direction:(unsigned long long)direction;
- (id)_segmentAfterFrameStore:(id)store orCreateSegmentWithTimestamp:(id)timestamp direction:(unsigned long long)direction;
- (id)nextSegmentAfterFrameStore:(id)store segmentNames:(id)names segmentFileHandles:(id)handles direction:(unsigned long long)direction;
- (id)newFramestoreWithTimestamp:(double)timestamp segmentNames:(id)names segmentFileHandles:(id)handles;
- (id)segmentWithFilename:(id)filename error:(id *)error;
- (id)segmentWithFilename:(id)filename segmentNames:(id)names segmentFileHandles:(id)handles error:(id *)error;
- (id)segmentContainingTimestamp:(double)timestamp;
- (BOOL)removeSegmentNamed:(id)named;
- (void)enumerateSegmentsFrom:(double)from to:(double)to withBlock:(id /* block */)block;
- (void)enumerateSegmentsNamesFrom:(double)from to:(double)to withBlock:(id /* block */)block;
- (void)reverseEnumerateSegmentsFrom:(double)from to:(double)to withBlock:(id /* block */)block;
- (void)reverseEnumerateSegmentsNamesFrom:(double)from to:(double)to withBlock:(id /* block */)block;
- (BOOL)shouldCacheFileDescriptors;
- (void)handleDeviceUnlock;
- (void)handleDeviceLockingCX;
- (void)handleDeviceLocking;
- (long long)cachingOptionsForFileHandleWithAttributes:(id)attributes;
@end

#endif /* BMSegmentManager_h */
