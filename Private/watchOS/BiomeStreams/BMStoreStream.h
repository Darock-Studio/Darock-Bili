//
//   Generated by https://github.com/blacktop/ipsw (Version: 3.1.454, BuildTime: 2024-02-08T22:07:34Z)
//
//    - LC_BUILD_VERSION:  Platform: watchOSSimulator, MinOS: 10.2, SDK: 10.2, Tool: ld (902.8)
//    - LC_SOURCE_VERSION: 123.2.7.0.1
//
#ifndef BMStoreStream_h
#define BMStoreStream_h
@import Foundation;

#include "BMSharedSyncableStream-Protocol.h"
#include "BMSourceStream-Protocol.h"
#include "BMStorePublisherManager.h"
#include "BMStoreSource.h"
#include "BMStoreValidator.h"
#include "BMSyncableStream-Protocol.h"
#include "BMTimeBasedPublisherStream-Protocol.h"

@class BMAccessClient, BMBFSPruningDelegate, BMFileManager, BMStoreConfig, BMStreamDatastorePruner, NSString;

@interface BMStoreStream : NSObject<BMSourceStream, BMTimeBasedPublisherStream, BMSyncableStream, BMSharedSyncableStream> {
  /* instance variables */
  struct os_unfair_lock_s { unsigned int _os_unfair_lock_opaque; } _lock;
  BMStorePublisherManager *_publisherManager;
  NSString *_streamIdentifier;
  BMStoreConfig *_storeConfig;
  BMStoreSource *_source;
  BMStoreValidator *_validator;
  BMStreamDatastorePruner *_pruner;
  BMStreamDatastorePruner *_tombstonePruner;
  unsigned long long _streamType;
  BMAccessClient *_accessClient;
  BMFileManager *_fileManager;
  Class _eventDataClass;
  BMBFSPruningDelegate *_bfsPruningDelegate;
}

@property (readonly, nonatomic) NSString *useCase;
@property (readonly, nonatomic) NSString *identifier;

/* class methods */
+ (id)new;

/* instance methods */
- (id)init;
- (id)initWithStreamIdentifier:(id)identifier storeConfig:(id)config;
- (id)initWithPublicStream:(long long)stream storeConfig:(id)config;
- (id)initWithPreMigrationPublicStream:(long long)stream;
- (id)initWithPublicStream:(long long)stream;
- (id)initWithPublicStream:(long long)stream protectionClass:(unsigned long long)class;
- (id)initWithPublicStream:(long long)stream protectionClass:(unsigned long long)class eventDataClass:(Class)class;
- (id)initWithRestrictedStreamIdentifier:(id)identifier;
- (id)initWithRestrictedStreamIdentifier:(id)identifier protectionClass:(unsigned long long)class;
- (id)initWithRestrictedStreamIdentifier:(id)identifier storeConfig:(id)config;
- (id)initWithRestrictedStreamIdentifier:(id)identifier storeConfig:(id)config eventDataClass:(Class)class;
- (id)initWithPrivateStreamIdentifier:(id)identifier storeConfig:(id)config;
- (id)initWithPrivateStreamIdentifier:(id)identifier storeConfig:(id)config eventDataClass:(Class)class;
- (BOOL)_requestReadOnlyAccess;
- (BOOL)_requestWriteOnlyAccess;
- (BOOL)_requestReadWriteAccess;
- (id)initWithStreamIdentifier:(id)identifier storeConfig:(id)config streamType:(unsigned long long)type;
- (id)initWithStreamIdentifier:(id)identifier storeConfig:(id)config streamType:(unsigned long long)type eventDataClass:(Class)class useCase:(id)case;
- (id)sharedSyncAccountsForDomain:(unsigned long long)domain error:(id *)error;
- (id)remoteDevices;
- (id)bfsPruningDelegate;
- (id)_bfsPruningDelegate;
- (id)publisherFromStartTime:(double)time;
- (id)publisherWithStartTime:(id)time withEndTime:(id)time withMaxEvents:(id)events reversed:(BOOL)reversed;
- (id)publisherWithStartTime:(id)time endTime:(id)time maxEvents:(id)events reversed:(BOOL)reversed;
- (id)publisherWithStartTime:(id)time endTime:(id)time maxEvents:(id)events lastN:(id)n reversed:(BOOL)reversed;
- (id)publisher;
- (id)remoteDevicesWithError:(id *)error;
- (id)publishersForDevices:(id)devices startTime:(double)time includeLocal:(BOOL)local pipeline:(id /* block */)pipeline;
- (id)publishersForDevices:(id)devices startTime:(id)time endTime:(id)time maxEvents:(id)events lastN:(id)n reversed:(BOOL)reversed includeLocal:(BOOL)local pipeline:(id /* block */)pipeline;
- (id)publishersForRemoteDevices:(id)devices startTime:(double)time includeLocal:(BOOL)local pipeline:(id /* block */)pipeline;
- (id)publishersForRemoteDevices:(id)devices startTime:(id)time endTime:(id)time maxEvents:(id)events lastN:(id)n reversed:(BOOL)reversed includeLocal:(BOOL)local pipeline:(id /* block */)pipeline;
- (id)accountsWithError:(id *)error;
- (id)publishersForAccounts:(id)accounts deviceTypes:(unsigned int)types withUseCase:(id)case startTime:(id)time endTime:(id)time maxEvents:(id)events lastN:(id)n reversed:(BOOL)reversed includeLocal:(BOOL)local pipeline:(id /* block */)pipeline;
- (id)source;
- (id)_computeSource;
- (id)validator;
- (id)tombstoneConfig;
- (id)pruner;
- (id)tombstonePruner;
- (void)pruneTombstonesByAge:(double)age;
- (void)pruneWithPredicateBlock:(id /* block */)block;
- (void)pruneWithReason:(unsigned long long)reason usingPredicateBlock:(id /* block */)block;
- (BOOL)pruneEventsWithError:(id *)error predicateBlock:(id /* block */)block;
- (BOOL)pruneEventsWithReason:(unsigned long long)reason error:(id *)error predicateBlock:(id /* block */)block;
- (void)_pruneWithStoreConfig:(id)config expirationAge:(double)age block:(id /* block */)block;
- (void)pruneExpiredEventsWithBlock:(id /* block */)block;
- (void)pruneStreamByPruningPolicyMaxStreamSize;
- (void)pruneStreamBySize:(unsigned long long)size;
- (void)pruneLocalAndRemoteEventsWithPredicateBlock:(id /* block */)block;
- (void)pruneLocalAndRemoteEventsWithReason:(unsigned long long)reason usingPredicateBlock:(id /* block */)block;
- (BOOL)deleteStoreEvent:(id)event;
@end

#endif /* BMStoreStream_h */
