//
//   Generated by https://github.com/blacktop/ipsw (Version: 3.1.454, BuildTime: 2024-02-08T22:07:34Z)
//
//    - LC_BUILD_VERSION:  Platform: watchOSSimulator, MinOS: 10.2, SDK: 10.2, Tool: ld (902.8)
//    - LC_SOURCE_VERSION: 1940.42.9.28.8
//
#ifndef GEOProactiveTileDownloader_h
#define GEOProactiveTileDownloader_h
@import Foundation;

#include "GEOOpportunisticDataSource-Protocol.h"
#include "GEOOpportunisticDataSourceDelegate-Protocol.h"
#include "GEOPowerAssertion.h"
#include "GEOProactiveTileDownloaderDelegate-Protocol.h"
#include "GEORequestCounter.h"
#include "GEOResourceManifestManager.h"
#include "GEOTileDB.h"
#include "GEOXPCActivity.h"

@class NSDictionary, NSMapTable, NSMutableArray, NSString, geo_isolater;
@protocol OS_dispatch_queue, OS_dispatch_source;

@interface GEOProactiveTileDownloader : NSObject<GEOOpportunisticDataSourceDelegate> {
  /* instance variables */
  NSString *_uniqueIdentifier;
  NSObject<OS_dispatch_queue> *_isolationQueue;
  NSObject<GEOProactiveTileDownloaderDelegate> *_delegate;
  NSObject<OS_dispatch_queue> *_delegateQueue;
  GEOTileDB *_diskCache;
  GEOResourceManifestManager *_manifestManager;
  GEORequestCounter *_requestCounter;
  struct GEOOnce_s { struct os_unfair_lock_s { unsigned int _os_unfair_lock_opaque; } lock; BOOL didRun; } _didStart;
  struct GEOOnce_s { struct os_unfair_lock_s { unsigned int _os_unfair_lock_opaque; } lock; BOOL didRun; } _didFinish;
  NSDictionary *_testDownloaders;
  NSMutableArray *_remainingPolicies;
  unsigned long long _currentPolicy;
  NSObject<GEOOpportunisticDataSource> *_currentDownloader;
  BOOL _policyEnabled[3];
  GEOPowerAssertion *_powerAssertion;
  GEOXPCActivity *_activity;
  NSMapTable *_tileRequesterClasses;
  NSObject<OS_dispatch_source> *_deferCheckinTimer;
  NSDictionary *_testPolicyEnabledOverrides;
  geo_isolater *_activityIsolation;
}

@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;

/* class methods */
+ (unsigned long long)maximumDownloadBatchSize;
+ (BOOL)_canUseXPCActivity;
+ (BOOL)shouldDownloadTileType:(int)type;

/* instance methods */
- (id)init;
- (id)initWithDelegate:(id)delegate delegateQueue:(id)queue diskCache:(id)cache tileRequesterClasses:(id)classes;
- (id)initWithDelegate:(id)delegate delegateQueue:(id)queue diskCache:(id)cache tileRequesterClasses:(id)classes manifestManager:(id)manager requestCounter:(id)counter downloaders:(id)downloaders policyEnabledOverrides:(id)overrides;
- (void)_takePowerAssertionIfNecessary;
- (void)_clearPowerAssertion;
- (void)_registerXPCDeferralTimer;
- (void)_clearXPCDeferralTimer;
- (void)start;
- (void)cancel;
- (void)_registerXPCActivity;
- (void)_xpcActivityFired;
- (void)_start;
- (void)_finish;
- (void)_startNextDownloader;
- (void)_pauseIfNecessary;
- (void)dataSourceDidFinish:(id)finish;
@end

#endif /* GEOProactiveTileDownloader_h */
